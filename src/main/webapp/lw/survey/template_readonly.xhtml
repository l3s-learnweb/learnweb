<ui:composition template="/WEB-INF/templates/layout/template.xhtml"
				xmlns:ui="jakarta.faces.facelets"
				xmlns:h="jakarta.faces.html"
				xmlns:f="jakarta.faces.core"
				xmlns:p="http://primefaces.org/ui"
				xmlns:c="jakarta.tags.core"
				xmlns:lw="http://l3s.de/learnweb">

<ui:param name="pageTitle" value="#{msg.survey}"/>

<ui:define name="metadata">
	<f:metadata>
		<f:viewParam name="survey_id" value="#{surveyTemplateBean.surveyId}" required="true" requiredMessage="Missing survey parameter"/>
		<f:viewAction action="#{surveyTemplateBean.onLoad}"/>
	</f:metadata>
</ui:define>

<ui:define name="breadcrumb">
	<lw:breadcrumb-item link="admin/index.jsf" title="#{msg.admin}">
		<ui:decorate template="/WEB-INF/templates/blocks/breadcrumb/nav_list_first.xhtml"/>
	</lw:breadcrumb-item>

	<lw:breadcrumb-item link="survey/templates.jsf" title="#{msg['survey.survey_overview']}">
		<ui:decorate template="/WEB-INF/templates/blocks/breadcrumb/nav_list_admin.xhtml"/>
	</lw:breadcrumb-item>

	<lw:breadcrumb-item title="#{surveyTemplateBean.survey.title}"/>
</ui:define>


<ui:define name="center_layout">
	<h:form id="surveyForm" rendered="#{surveyTemplateBean.survey != null}">
		<p:panel>
			<h:panelGroup>
				<h:panelGroup id="questions">
					<h2>#{surveyTemplateBean.survey.title}</h2>
					<c:forEach var="question" items="#{surveyTemplateBean.survey.questions}">
						<div class="mb-3">
							<div class="d-flex flex-nowrap">
								<ui:decorate template="/WEB-INF/templates/blocks/survey/question.xhtml">
									<ui:param name="question" value="#{question}"/>
									<ui:param name="update" value="#{false}"/>
								</ui:decorate>
							</div>
						</div>
					</c:forEach>
				</h:panelGroup>

				<div class="d-flex mt-3">
						<p:commandButton value="#{msg.Print}" styleClass="ui-button-warning d-print-none">
							<p:printer target="questions"/>
						</p:commandButton>
				</div>
			</h:panelGroup>
		</p:panel>
	</h:form>
</ui:define>

</ui:composition>
