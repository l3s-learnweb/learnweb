<ui:composition 
	template="/WEB-INF/templates/layout/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:param name="loginRequired" value="true"/>
	<ui:param name="pageTitle" value="#{msg.tracker}"/>

	<ui:define name="sub_breadcrumb">
		<p:menuitem value="#{msg.tracker}" url="admin/tracker.jsf"/>
	</ui:define>

	<ui:define name="center_layout">
		<h:form>
			<p:dataTable tableStyleClass="table-sm table-responsive" value="#{dashboard.trackerStatistics}" var="entry">
				<f:facet name="header">#{msg.tracker_statistic}</f:facet>

				<p:columnGroup type="header">
					<p:row>
						<p:column colspan="2" headerText="#{msg.user}" />
						<p:column colspan="5" headerText="#{msg['application.name']}+#{msg.proxy} (#{msg.summarized})" />
						<p:column colspan="5" headerText="#{msg['application.name']}" />
						<p:column colspan="5" headerText="#{msg.proxy}" />
					</p:row>

					<p:row>
						<p:column headerText="#{msg.user}" sortBy="#{entry['user'].username}" />
						<p:column headerText="#{msg.grade}" sortBy="#{entry['user'].additionalInformation}" />

						<p:column headerText="#{msg.time_stay}" sortBy="#{entry['summarized'].timeStay}" />
						<p:column headerText="#{msg.time_active}" sortBy="#{entry['summarized'].timeActive}" />
						<p:column headerText="#{msg.clicks}" sortBy="#{entry['summarized'].clicks}" />
						<p:column headerText="#{msg.keypresses}" sortBy="#{entry['summarized'].keypresses}" />
						<p:column headerText="#{msg.total_events}" sortBy="#{entry['summarized'].totalEvents}" />

						<p:column headerText="#{msg.time_stay}" sortBy="#{entry['learnweb'].timeStay}" />
						<p:column headerText="#{msg.time_active}" sortBy="#{entry['learnweb'].timeActive}" />
						<p:column headerText="#{msg.clicks}" sortBy="#{entry['learnweb'].clicks}" />
						<p:column headerText="#{msg.keypresses}" sortBy="#{entry['learnweb'].keypresses}" />
						<p:column headerText="#{msg.total_events}" sortBy="#{entry['learnweb'].totalEvents}" />

						<p:column headerText="#{msg.time_stay}" sortBy="#{entry['proxy'].timeStay}" />
						<p:column headerText="#{msg.time_active}" sortBy="#{entry['proxy'].timeActive}" />
						<p:column headerText="#{msg.clicks}" sortBy="#{entry['proxy'].clicks}" />
						<p:column headerText="#{msg.keypresses}" sortBy="#{entry['proxy'].keypresses}" />
						<p:column headerText="#{msg.total_events}" sortBy="#{entry['proxy'].totalEvents}" />
					</p:row>
				</p:columnGroup>

				<p:column headerText="#{msg.user}">
					<h:outputText value="#{entry['user'].id}" />
				</p:column>

				<p:column headerText="#{msg.grade}">
					<h:outputText value="#{entry['user'].additionalInformation}" />
				</p:column>

				<p:column headerText="#{msg.time_stay}">
					<h:outputText value="#{entry['summarized'].timeStayFormatted}" />
				</p:column>

				<p:column headerText="#{msg.time_active}">
					<h:outputText value="#{entry['summarized'].timeActiveFormatted}" />
				</p:column>

				<p:column headerText="#{msg.clicks}">
					<h:outputText value="#{entry['summarized'].clicks}" />
				</p:column>

				<p:column headerText="#{msg.keypresses}">
					<h:outputText value="#{entry['summarized'].keypresses}" />
				</p:column>

				<p:column headerText="#{msg.total_events}"  >
					<h:outputText value="#{entry['summarized'].totalEvents}" />
				</p:column>

				<p:column headerText="#{msg.time_stay}">
					<h:outputText value="#{entry['learnweb'].timeStayFormatted}" />
				</p:column>

				<p:column headerText="#{msg.time_active}">
					<h:outputText value="#{entry['learnweb'].timeActiveFormatted}" />
				</p:column>

				<p:column headerText="#{msg.clicks}">
					<h:outputText value="#{entry['learnweb'].clicks}" />
				</p:column>

				<p:column headerText="#{msg.keypresses}">
					<h:outputText value="#{entry['learnweb'].keypresses}" />
				</p:column>

				<p:column headerText="#{msg.total_events}">
					<h:outputText value="#{entry['learnweb'].totalEvents}" />
				</p:column>

				<p:column headerText="#{msg.time_stay}">
					<h:outputText value="#{entry['proxy'].timeStayFormatted}" />
				</p:column>

				<p:column headerText="#{msg.time_active}">
					<h:outputText value="#{entry['proxy'].timeActiveFormatted}" />
				</p:column>

				<p:column headerText="#{msg.clicks}">
					<h:outputText value="#{entry['proxy'].clicks}" />
				</p:column>

				<p:column headerText="#{msg.keypresses}">
					<h:outputText value="#{entry['proxy'].keypresses}" />
				</p:column>

				<p:column headerText="#{msg.total_events}"  >
					<h:outputText value="#{entry['proxy'].totalEvents}" />
				</p:column>
			</p:dataTable>
		</h:form>
	</ui:define>
</ui:composition>
