<ui:composition
		template="/WEB-INF/templates/layout/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="course_id" value="#{adminCourseBean.courseId}" />
		</f:metadata>
	</ui:define>
	
	<ui:param name="loginRequired" value="true"/>
	<ui:param name="pageTitle" value="#{adminCourseBean.course.title} #{msg.course}" />
	
	<ui:define name="content">

		<div class="page-header">
			<h1>#{adminCourseBean.course.title} - #{msg.course}</h1>
		</div>

		<h:form id="editwelcomeform"  prependId="false" styleClass="form">
			<div class="p-grid">

				<div class="p-col-12">
					<div class="card card-w-title">
						<h2><h:outputText value="#{msg.welcome_message}" /></h2>
						<p:textEditor height="284" value="#{adminCourseBean.course.welcomeMessage}" rendered="#{not adminCourseBean.course.welcomeMessage.contains('table')}" />
						
						<p:editor height="284" value="#{adminCourseBean.course.welcomeMessage}" rendered="#{adminCourseBean.course.welcomeMessage.contains('table')}" />
					</div>
				</div>

				<div class="p-col-12">
					<div class="p-grid">
						<div class="p-col">
							<div class="card card-w-title">
								<h2 class="no-margin-bottom">Common settings</h2>
								<div class="grid">

										<p>
											<h:outputText value="#{msg.title}:" />
										</p>
										<p:inputText id="c_title" value="#{adminCourseBean.course.title}">
											<p:ajax update="message_c_title" />
										</p:inputText>
										<p:message for="c_title" showSummary="true" showDetail="false" id="message_c_title"/>

										<p>
											<h:outputText value="Wizard Parameter:" />
										</p>
										<p:inputText id="c_param" value="#{adminCourseBean.course.wizardParam}">
											<p:ajax update="message_c_param" />
										</p:inputText>
										<p:message for="c_param" showSummary="true" showDetail="false" id="message_c_param"/>

										<!--<p><h:outputText value="#{msg.organization}:" rendered="#{userBean.admin}" /></p>
										<p:selectOneMenu id="c_organisation" value="#{adminCourseBean.course.organisationId}" rendered="#{userBean.admin}">
											<f:selectItem itemLabel="No organisation" itemValue="0" />
											<f:selectItem itemLabel="&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;&#45;" itemValue="-1" itemDisabled="true" />
											<f:selectItems var="org" value="#{adminCourseBean.organisations}" itemLabel="#{org.title}" itemValue="#{org.id}"/>
										</p:selectOneMenu>
										<p:message for="c_organisation" showSummary="true" showDetail="false" id="message_c_organisation" rendered="#{userBean.admin}"/>-->

										<p><h:outputText value="Default group:" /></p>
										<p:selectOneMenu id="c_group" value="#{adminCourseBean.course.defaultGroupId}">
											<f:selectItem itemLabel="No default group" itemValue="0" />
											<f:selectItem itemLabel="------------" itemValue="-1" itemDisabled="true" />
											<f:selectItems var="group" value="#{adminCourseBean.course.groups}" itemLabel="#{group.title}" itemValue="#{group.id}"/>
										</p:selectOneMenu>
										<p:message for="c_group" showSummary="true" showDetail="false" />

								</div>
							</div>




						</div>
						<div class="p-col">

							<div class="card card-w-title">
								<h2 style="margin-bottom: 14px!important;">Additional settings</h2>
								<p:accordionPanel autoHeight="false" id="courseoptions">
									<c:forEach items="#{adminCourseBean.optionGroups}" var="group" varStatus="status">

										<p:tab title="#{adminCourseBean.optionGroups[status.index].title}">
											<h:dataTable value="#{adminCourseBean.optionGroups[status.index].options}" var="option">
												<h:column>
													<h:selectBooleanCheckbox value="#{option.value}" id="checkbox"/>
												</h:column>
												<h:column>
													<h:outputLabel value="#{option.name}" for="checkbox" />
												</h:column>
											</h:dataTable>
										</p:tab>

									</c:forEach>
								</p:accordionPanel>

								<p>
									#{msg.changes_login_again}
								</p>
							</div>
						</div>
					</div>
				</div>

				<div class="p-col-12">
					<div class="card card-w-title control-buttons" >
						<p>
							<p:commandButton actionListener="#{adminCourseBean.save}" value="#{msg.save}" update=":growl :courseoptions">
								<f:param name="course_id" value="#{adminCourseBean.courseId}" />
							</p:commandButton>
						</p>
					</div>

				</div>

			</div>


		</h:form>




	</ui:define>
</ui:composition>