<ui:composition
		template="/WEB-INF/templates/layout/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="course_id" value="#{adminCourseBean.courseId}" />
		</f:metadata>
	</ui:define>
	
	<ui:param name="loginRequired" value="true"/>
	<ui:param name="pageTitle" value="#{adminCourseBean.course.title} #{msg.course}" />
	
	<ui:define name="content">

		<p:panel header="#{adminCourseBean.course.title} - #{msg.course}">
			<h:form id="course_form" prependId="false">
				<h:panelGrid columns="3" columnClasses="medium-width">
					
					<h:outputText value="#{msg.title}:" />
					<p:inputText id="c_title" value="#{adminCourseBean.course.title}">
						<p:ajax update="message_c_title" />
					</p:inputText>
					<p:message for="c_title" showSummary="true" showDetail="false" id="message_c_title"/>
					
					<h:outputText value="Wizard Parameter:" />
					<p:inputText id="c_param" value="#{adminCourseBean.course.wizardParam}">
						<p:ajax update="message_c_param" />
					</p:inputText>
					<p:message for="c_param" showSummary="true" showDetail="false" id="message_c_param"/>
					
					<h:outputText value="#{msg.organization}:" rendered="#{userBean.admin}" />
					<p:selectOneMenu id="c_organisation" value="#{adminCourseBean.course.organisationId}" rendered="#{userBean.admin}">
						<f:selectItem itemLabel="No organisation" itemValue="0" />
						<f:selectItem itemLabel="------------" itemValue="-1" itemDisabled="true" />	
						<f:selectItems var="org" value="#{adminCourseBean.organisations}" itemLabel="#{org.title}" itemValue="#{org.id}"/>
					</p:selectOneMenu>
					<p:message for="c_organisation" showSummary="true" showDetail="false" id="message_c_organisation" rendered="#{userBean.admin}"/>
						
					<h:outputText value="Default group:" />
					<p:selectOneMenu id="c_group" value="#{adminCourseBean.course.defaultGroupId}">
						<f:selectItem itemLabel="No default group" itemValue="0" />
						<f:selectItem itemLabel="------------" itemValue="-1" itemDisabled="true" />	
						<f:selectItems var="group" value="#{adminCourseBean.course.groups}" itemLabel="#{group.title}" itemValue="#{group.id}"/>
					</p:selectOneMenu>
					<p:message for="c_group" showSummary="true" showDetail="false" />		

				</h:panelGrid>
				<br/>
				
				<p>
					<h:outputText value="#{msg.welcome_message}:" />
				</p>
				<div>
					<p:textEditor height="184" value="#{adminOrganisationsBean.selectedOrganisation.welcomeMessage}" />
				</div>
			 
			 	<br/>
				<p:accordionPanel autoHeight="false" id="courseoptions">
					<c:forEach items="#{adminCourseBean.optionGroups}" var="group" varStatus="status">					

						<p:tab title="#{adminCourseBean.optionGroups[status.index].title}">
							<h:dataTable value="#{adminCourseBean.optionGroups[status.index].options}" var="option">
								<h:column>
									<h:selectBooleanCheckbox value="#{option.value}" id="checkbox"/>
								</h:column>
								<h:column>
									<h:outputLabel value="#{option.name}" for="checkbox" />
								</h:column>
							</h:dataTable>
						</p:tab>

					</c:forEach>
				</p:accordionPanel>
				
				<p>
					#{msg.changes_login_again}
				</p>		
				



			</h:form>

		</p:panel>


		<div class="p-col-12">
			<div class="card card-w-title save-button" >
				<p>
					<p:commandButton actionListener="#{adminCourseBean.save}" value="#{msg.save}" update=":growl :courseoptions">
						<f:param name="course_id" value="#{adminCourseBean.courseId}" />
					</p:commandButton>
				</p>
			</div>

		</div>

	</ui:define>
</ui:composition>