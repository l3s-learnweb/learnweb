<ui:composition template="/templates/main/main.xhtml" 
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="user_id" value="#{dashboardBean.selectedUserId}" />			
    		<f:viewAction action="#{dashboardBean.onLoad}"/>
		</f:metadata>
	</ui:define>

	<ui:param name="loginRequired" value="true" />
	<ui:param name="pageTitle" value="Dashboard" />

	<ui:define name="center_layout">

		<style>
		</style>

		<div class="page_header" style="margin: 5px;">
			<span>Dashboard</span>
		</div>

		<p:panel style="margin:5px;">
			<h:form id="mainform">
				<p:dataTable value="#{dashboardBean.glossaryFieldSummeryPerUser}" var="entry" styleClass="countries_list">
					<p:column headerText="#{msg.username}" sortable="true" sortBy="#{entry.user.username}" filterable="true" filterBy="#{entry.user.username}" filterMatchMode="contains">
						<!-- <a href="dashboard.jsf?user_id=#{entry.userid}">
						 -->#{entry.user.username}
					</p:column>
					<p:column styleClass="align-right" headerText="Terms" sortBy="#{entry.total}" sortable="true">   				
						#{entry.total}
					</p:column>
					<p:column styleClass="align-right" sortBy="#{entry.pronounciation/entry.total}" sortable="true">
						<f:facet name="header">Pronunciation</f:facet>

						<h:outputText value="#{entry.pronounciation/entry.total*100}">
							<f:convertNumber locale="#{userBean.locale}" maxFractionDigits="2" minFractionDigits="2" />
						</h:outputText>%
					</p:column>
					<p:column styleClass="align-right" sortBy="#{entry.acronym/entry.total}" sortable="true">
						<f:facet name="header">Acronym</f:facet>
						<h:outputText value="#{entry.acronym/entry.total*100}">
							<f:convertNumber locale="#{userBean.locale}" maxFractionDigits="2" minFractionDigits="2" />
						</h:outputText>%
					</p:column>
					<p:column styleClass="align-right" sortBy="#{entry.phraseology/entry.total}" sortable="true">
						<f:facet name="header">Phraseology</f:facet>
						<h:outputText value="#{entry.phraseology/entry.total*100}">
							<f:convertNumber locale="#{userBean.locale}" maxFractionDigits="2" minFractionDigits="2" />
						</h:outputText>%
					</p:column>
					<p:column styleClass="align-right" sortBy="#{entry.uses/entry.total}" sortable="true">
						<f:facet name="header">Uses</f:facet>
						<h:outputText value="#{entry.uses/entry.total*100}">
							<f:convertNumber locale="#{userBean.locale}" maxFractionDigits="2" minFractionDigits="2" />
						</h:outputText>%
					</p:column>
					<p:column styleClass="align-right" sortBy="#{entry.source/entry.total}" sortable="true">
						<f:facet name="header">Source</f:facet>
						<h:outputText value="#{entry.source/entry.total*100}">
							<f:convertNumber locale="#{userBean.locale}" maxFractionDigits="2" minFractionDigits="2" />
						</h:outputText>%
					</p:column>
					<p:column styleClass="align-right" sortBy="#{entry.avg}" sortable="true">
						<f:facet name="header">AVG %</f:facet>
						<h:outputText value="#{entry.avg*100}">
							<f:convertNumber locale="#{userBean.locale}" maxFractionDigits="2" minFractionDigits="2" />
						</h:outputText>%
					</p:column>
				</p:dataTable>
			</h:form>
		</p:panel>
	</ui:define>
</ui:composition>