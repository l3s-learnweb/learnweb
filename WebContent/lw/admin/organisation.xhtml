<ui:composition
        template="/WEB-INF/templates/layout/template.xhtml"
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
        xmlns:h="http://xmlns.jcp.org/jsf/html"
        xmlns:f="http://xmlns.jcp.org/jsf/core"
        xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
        xmlns:p="http://primefaces.org/ui">

    <ui:param name="loginRequired" value="true" />
    <ui:param name="pageTitle" value="#{msg.organization}" />
    <ui:param name="disableGrowl" value="true" />

    <ui:define name="content">
        <ui:fragment rendered="#{null ne adminOrganisationsBean.selectedOrganisation}">
            <h:form id="editwelcomeform">
                <div class="p-grid mat-content-normilizer">
                    <div class="p-col-12">
                        <h1 class="mat-no-margin">#{adminOrganisationsBean.selectedOrganisation.title}</h1>
                    </div>

                    <div class="p-col-12">
                        <div class="p-col mat-no-padding">
                            <div class="card card-w-title">
                                <h2 style="margin-bottom: 14px!important;"><h:outputText value="#{msg.welcome_message}:" /></h2>
                                <div>
                                    <p:textEditor height="184" value="#{adminOrganisationsBean.selectedOrganisation.welcomeMessage}" />
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="p-col-12">
                        <div class="p-grid">
                            <div class="p-col">
                                <div class="card card-w-title">
                                    <h2>Common settings</h2>
                                    <div>
                                        <p>
                                            <h:outputText value="#{msg.title}:" />
                                        </p>
                                        <p:inputText value="#{adminOrganisationsBean.selectedOrganisation.title}" />

                                        <p>
                                            <h:outputText value="Banner image:" />
                                        </p>
                                        <p:fileUpload fileUploadListener="#{adminOrganisationsBean.handleFileUpload}" id="imageupload" mode="advanced" update="bannerimage" auto="true" sizeLimit="1000000"
                                                      allowTypes="/(\.|\/)(gif|jpe?g|png)$/"  />
                                        <h:panelGroup id="bannerimage">
                                            <img src="#{adminOrganisationsBean.selectedOrganisation.bannerImage}" />
                                        </h:panelGroup>

                                        <p>
                                            <h:outputText value="Welcome Page: " />
                                        </p>
                                        <p:selectOneMenu id="welcomePage" value="#{adminOrganisationsBean.selectedOrganisation.welcomePage}" editable="true">
                                            <f:selectItem itemValue="/lw/myhome/activity.jsf" itemLabel="/lw/myhome/activity.jsf" />
                                            <f:selectItem itemValue="/lw/myhome/welcome.jsf" itemLabel="/lw/myhome/welcome.jsf" />
                                        </p:selectOneMenu>

                                        <p>
                                            <h:outputText value="Logout Page: " />
                                        </p>
                                        <p:selectOneMenu value="#{adminOrganisationsBean.selectedOrganisation.logoutPage}" editable="true">
                                            <f:selectItem itemValue="/lw/index.jsf" itemLabel="Learnweb index page" />
                                            <f:selectItem itemValue="/ama/index.jsf" itemLabel="AMA index page" />
                                            <f:selectItem itemValue="/aw/index.jsf" itemLabel="Archive index page" />
                                        </p:selectOneMenu>

                                        <p>
                                            <h:outputText value="Default language: " />
                                        </p>
                                        <p:selectOneMenu value="#{adminOrganisationsBean.selectedOrganisation.defaultLanguage}">
                                            <f:selectItem itemLabel="No default" itemValue="#{null}" />
                                            <f:selectItem itemLabel="#{msg.language_de}" itemValue="de" />
                                            <f:selectItem itemLabel="#{msg.language_en}" itemValue="en" />
                                            <f:selectItem itemLabel="#{msg.language_it}" itemValue="it" />
                                            <f:selectItem itemLabel="#{msg.language_pt}" itemValue="pt" />
                                        </p:selectOneMenu>

                                        <p>
                                            <h:outputText value="Language variant: " />
                                        </p>
                                        <p:selectOneMenu value="#{adminOrganisationsBean.selectedOrganisation.languageVariant}" editable="false">
                                            <f:selectItem itemValue="" itemLabel="No variant" />
                                            <f:selectItem itemValue="AMA" itemLabel="AMA" />
                                            <f:selectItem itemValue="Archive" itemLabel="Archive"/>
                                        </p:selectOneMenu>

                                        <p>
                                            <h:outputText value="Glossary languages: " />
                                        </p>
                                        <p:selectCheckboxMenu value="#{adminOrganisationsBean.selectedOrganisation.glossaryLanguages}" required="true" requiredMessage="#{msg.mandatory_field}"
                                                              label="#{msg.language}" multiple="true" converter="#{localeConverter}">
                                            <f:selectItems value="#{adminOrganisationsBean.availableGlossaryLanguages}"></f:selectItems>
                                        </p:selectCheckboxMenu>



                                    </div>
                                </div>

                            </div>
                            <div class="p-col">

                                <div class="card card-w-title">
                                    <h2 style="margin-bottom: 14px!important;">Additional settings</h2>
                                    <p:accordionPanel autoHeight="false" id="courseoptions">
                                        <c:forEach items="#{adminOrganisationsBean.optionGroups}" var="group" varStatus="status">

                                            <p:tab title="#{adminOrganisationsBean.optionGroups[status.index].title}">
                                                <h:dataTable value="#{adminOrganisationsBean.optionGroups[status.index].options}" var="option">
                                                    <h:column>
                                                        <h:selectBooleanCheckbox value="#{option.value}" id="checkbox" />
                                                    </h:column>
                                                    <h:column>
                                                        <h:outputLabel value="#{option.name}" for="checkbox" />
                                                    </h:column>
                                                </h:dataTable>
                                            </p:tab>

                                        </c:forEach>
                                    </p:accordionPanel>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="p-col-12">
                        <div class="card card-w-title mat-save-button" >
                            <p>
                                <p:commandButton action="#{adminOrganisationsBean.onSave}" value="#{msg.save}" ajax="false" />
                                <p:button rendered="#{userBean.admin}" outcome="organisations" value="Back to Organisations" />
                            </p>
                        </div>

                    </div>

                </div>

            </h:form>
        </ui:fragment>
    </ui:define>
</ui:composition>