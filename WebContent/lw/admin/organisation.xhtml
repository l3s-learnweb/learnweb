<ui:composition 
	template="/templates/main/main.xhtml" 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"> 

	<ui:param name="loginRequired" value="true"/>
	<ui:param name="pageTitle" value="#{msg.organization}"/>

	<ui:define name="center_layout" >	

			
		<style type="text/css">
			p { margin: 12px 0 6px 0; }
		</style>
			
		<div class="page_header" style="margin:5px;">
			<span>
				#{adminOrganisationsBean.selectedOrganisation.title}
			</span>
		</div>		
						
		<p:panel style="min-width:628px; margin:5px;">
				
			<h:form id="editwelcomeform">
				<p><h:outputText value="#{msg.title}:" /></p>
				<p:inputText value="#{adminOrganisationsBean.selectedOrganisation.title}" style="width:40rem" />
				
				<p><h:outputText value="Welcome Page: " /></p>
				<p:selectOneMenu id="welcomePage" value="#{adminOrganisationsBean.selectedOrganisation.welcomePage}" style="width:40rem" editable="true">
					<f:selectItem itemLabel="myhome/activity.jsf" itemValue="myhome/activity.jsf" />
					<f:selectItem itemLabel="myhome/welcome.jsf" itemValue="myhome/welcome.jsf" />
				</p:selectOneMenu>
				
				<ui:fragment rendered="#{userBean.user.organisationId != 1249}">
				<!-- EU-Made4all teachers should only edit the course welcome page -->
				<p>
					<h:outputText value="#{msg.welcome_message}:" />
				</p>
				<p:editor value="#{adminOrganisationsBean.selectedOrganisation.welcomeMessage}" width="600" />
				</ui:fragment>
				
				<br/>
				<p:accordionPanel autoHeight="false" id="courseoptions">
					<c:forEach items="#{adminOrganisationsBean.optionGroups}" var="group" varStatus="status">					

						<p:tab title="#{adminOrganisationsBean.optionGroups[status.index].title}">
							<h:dataTable value="#{adminOrganisationsBean.optionGroups[status.index].options}" var="option">
								<h:column>
									<h:selectBooleanCheckbox value="#{option.value}" id="checkbox"/>
								</h:column>
								<h:column>
									<h:outputLabel value="#{option.name}" for="checkbox" />
								</h:column>
							</h:dataTable>
						</p:tab>

					</c:forEach>
				</p:accordionPanel>
				
				<p>
					<p:commandButton action="#{adminOrganisationsBean.onSave}" value="#{msg.save}" ajax="false"/>
					
					<p:button style="margin-left:5px;" rendered="#{userBean.admin}" outcome="organisations" value="Back to Organisations" />
				</p>
			</h:form>
					
		</p:panel>			

	
	</ui:define>
</ui:composition>