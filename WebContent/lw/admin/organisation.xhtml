<ui:composition 
	template="/templates/main/main.xhtml" 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui"> 
	
	<ui:param name="loginRequired" value="true" />
	<ui:param name="pageTitle" value="#{msg.organization}" />	
	<ui:param name="disableGrowl" value="true" />

	<ui:define name="center_layout">

		<style type="text/css">
		p {
			margin: 12px 0 6px 0;
		}
		</style>

		<div class="page_header" style="margin: 5px;">
			<span> #{adminOrganisationsBean.selectedOrganisation.title} </span>
		</div>

		<p:panel style="min-width:628px; margin:5px;">

			<h:form id="editwelcomeform">
				<p>
					<h:outputText value="#{msg.title}:" />
				</p>
				<p:inputText value="#{adminOrganisationsBean.selectedOrganisation.title}" style="width:40rem" />

				<p>
					<h:outputText value="Banner image:" />
				</p>
				<p:fileUpload fileUploadListener="#{adminOrganisationsBean.handleFileUpload}" id="imageupload" mode="advanced" update="bannerimage" auto="true" sizeLimit="1000000"
					allowTypes="/(\.|\/)(gif|jpe?g|png)$/" style="width:40rem"  />
				<h:panelGroup id="bannerimage">
					<img src="#{adminOrganisationsBean.selectedOrganisation.bannerImage}" />
				</h:panelGroup>

				<p>
					<h:outputText value="Welcome Page: " />
				</p>
				<p:selectOneMenu id="welcomePage" value="#{adminOrganisationsBean.selectedOrganisation.welcomePage}" style="width:40rem" editable="true">
					<f:selectItem itemValue="/lw/myhome/activity.jsf" itemLabel="/lw/myhome/activity.jsf" />
					<f:selectItem itemValue="/lw/myhome/welcome.jsf" itemLabel="/lw/myhome/welcome.jsf" />
				</p:selectOneMenu>

				<p>
					<h:outputText value="Logout Page: " />
				</p>
				<p:selectOneMenu value="#{adminOrganisationsBean.selectedOrganisation.logoutPage}" style="width:40rem" editable="true">
					<f:selectItem itemValue="/lw/index.jsf" itemLabel="Learnweb index page" />
					<f:selectItem itemValue="/ama/index.jsf" itemLabel="AMA index page" />
					<f:selectItem itemValue="/aw/index.jsf" itemLabel="Archive index page" />
				</p:selectOneMenu>
				
				<p>
					<h:outputText value="Default language: " />
				</p>
				<p:selectOneMenu value="#{adminOrganisationsBean.selectedOrganisation.defaultLanguage}" style="width:40rem">
					<f:selectItem itemLabel="No default" itemValue="#{null}" />
					<f:selectItem itemLabel="#{msg.language_de}" itemValue="de" />
					<f:selectItem itemLabel="#{msg.language_en}" itemValue="en" />
					<f:selectItem itemLabel="#{msg.language_it}" itemValue="it" />
					<f:selectItem itemLabel="#{msg.language_pt}" itemValue="pt" />
				</p:selectOneMenu>
				
				<p>
					<h:outputText value="Language variant: " />
				</p>
				<p:selectOneMenu value="#{adminOrganisationsBean.selectedOrganisation.languageVariant}" style="width:40rem" editable="false">
					<f:selectItem itemValue="" itemLabel="No variant" />
					<f:selectItem itemValue="AMA" itemLabel="AMA" />
					<f:selectItem itemValue="Archive" itemLabel="Archive"/>
				</p:selectOneMenu>
				
				<p>
					<h:outputText value="#{msg.welcome_message}:" />
				</p>
				<p:editor value="#{adminOrganisationsBean.selectedOrganisation.welcomeMessage}" width="600" />


				<br />
				<p:accordionPanel autoHeight="false" id="courseoptions">
					<c:forEach items="#{adminOrganisationsBean.optionGroups}" var="group" varStatus="status">

						<p:tab title="#{adminOrganisationsBean.optionGroups[status.index].title}">
							<h:dataTable value="#{adminOrganisationsBean.optionGroups[status.index].options}" var="option">
								<h:column>
									<h:selectBooleanCheckbox value="#{option.value}" id="checkbox" />
								</h:column>
								<h:column>
									<h:outputLabel value="#{option.name}" for="checkbox" />
								</h:column>
							</h:dataTable>
						</p:tab>

					</c:forEach>
				</p:accordionPanel>

				<p>
					<p:commandButton action="#{adminOrganisationsBean.onSave}" value="#{msg.save}" ajax="false" />

					<p:button style="margin-left:5px;" rendered="#{userBean.admin}" outcome="organisations" value="Back to Organisations" />
				</p>
			</h:form>

		</p:panel>


	</ui:define>
</ui:composition>