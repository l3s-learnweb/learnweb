<ui:composition
		template="/WEB-INF/templates/layout/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
 
	<ui:param name="loginRequired" value="true"/>
	<ui:param name="pageTitle" value="#{msg.statistics_group}"/>

	<ui:define name="content">

		
		<div class="page-header" >

			<h1>#{msg.statistics_group}</h1>

		</div>

		<h:form id="anlyse_form" styleClass="form">
			<div class="p-grid margin-top no-padding-bottom">
				<div class="p-col-12 grid no-padding-top no-padding-bottom ">
					<div class="card card-w-title grid">
						<h2><h:outputText value="#{msg.select_groups}" /></h2>
						<ui:include src="/lw/templates/group_select_form.xhtml" />
						<div class="flex-label">
							<p:selectBooleanCheckbox value="#{adminStatisticsBean.showDetails}" />
							<label>#{msg.statistics_show_detailed}</label>
						</div>
						<p:commandButton actionListener="#{adminStatisticsBean.onGroupStatistics}" styleClass="margin-top in-form-button" value="#{msg.statistics_show}" process="@form" />
										 <!--update=":growl output"/>-->

					</div>
				</div>
			</div>

			<div id="output">
                <div class="p-grid margin-top">
                    <div class="p-col-12 grid no-padding-top ">
                        <div class="card card-w-title grid">
                            <h2><h:outputText value="#{msg.statistics}" /></h2>
					            <p:dataTable var="entry" value="#{adminStatisticsBean.groupStatistics}" emptyMessage="#{msg.no_results_found}">
					 	<p:column headerText="#{msg.group}" sortBy="#{entry.title}">
					    	<h:outputText value="#{entry.title}" />
					    </p:column>

					    <p:column headerText="#{msg.resources}" >
					    	<h:outputText value="#{entry.resources}" />
					    </p:column>

					    <p:column headerText="#{msg.thumb_ratings}" >
					   		<h:outputText value="#{entry.thumb_ratings}" />
					    </p:column>

					    <p:column headerText="#{msg.star_ratings}" >
					    	<h:outputText value="#{entry.star_ratings}" />
					    </p:column>

					    <p:column headerText="#{msg.comments}" >
					    	<h:outputText value="#{entry.comments}" />
					    </p:column>

					    <p:column headerText="#{msg.tags}" >
					    	<h:outputText value="#{entry.tags}" />
					    </p:column>

					  	<p:column headerText="#{msg.no_of_archived_versions}" >
					    	<h:outputText value="#{entry.no_of_archived_versions}" />
					    </p:column>

					  	<p:column headerText="#{msg.no_of_archived_resources}" >
					    	<h:outputText value="#{entry.no_of_archived_resources}" />
					    </p:column>

					    <p:column headerText="#{msg.forum_topics}" >
					    	<h:outputText value="#{entry.forum_topics}" />
					    </p:column>

					    <p:column headerText="#{msg.forum_posts}" >
					  		<h:outputText value="#{entry.forum_posts}" />
					    </p:column>

					</p:dataTable>
                        </div>
                    </div>

					<ui:fragment rendered="#{adminStatisticsBean.showDetails}" >
						<div class="p-col-12 grid" >
							<div class="card card-w-title grid">
								<h2><h:outputText value="#{msg.statistics_detailed}" /></h2>
								<div class="boolean-buttons">
										<p:selectBooleanButton offLabel="#{msg.toggle_description}" onLabel="#{msg.toggle_description}"
															   onchange="$('.description').toggle();" value="off" />
										<p:selectBooleanButton offLabel="#{msg.toggle_comments}" onLabel="#{msg.toggle_comments}"
															   onchange="$('.admin_comments').toggle();" value="on" />

								</div>

								<hr />
								<h:outputText value="#{adminStatisticsBean.detailedDescription}" escape="false" />
							</div>
						</div>
					</ui:fragment>

<!--				<p:panel header="" rendered="#{adminStatisticsBean.showDetails}" style="margin-top:30px;">

				</p:panel>-->
                </div>
			</div>

		</h:form>

	</ui:define>
</ui:composition>