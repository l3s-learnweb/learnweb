<ui:composition
		template="/WEB-INF/templates/layout/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">
 
	<ui:param name="loginRequired" value="true"/>
	<ui:param name="pageTitle" value="#{msg.statistics_group}"/>
	<ui:define name="sub_breadcrumb">
		<p:menuitem value="#{msg.statistics_group}" url="admin/statistics.jsf#"/>
	</ui:define>
	<ui:define name="center_layout">
		<h:form id="anlyse_form" >
				<p:panel header="#{msg.select_groups}">
						<ui:include src="/templates/user/user_select_form.xhtml" />
						<div>
							<p:selectBooleanCheckbox value="#{adminStatisticsBean.showDetails}" />
							<label>#{msg.statistics_show_detailed}</label>
						</div>
						<p:commandButton actionListener="#{adminStatisticsBean.onGroupStatistics}" update=":growl output" styleClass="margin-top in-form-button" value="#{msg.statistics_show}" process="@form" />
										 <!--update=":growl output"/>-->
				</p:panel>





				<p:dataTable id="output" var="entry" value="#{adminStatisticsBean.groupStatistics}" emptyMessage="#{msg.no_results_found}">
					<f:facet name="header">
						#{msg.statistics}
					</f:facet>
					 	<p:column headerText="#{msg.group}" sortBy="#{entry.title}">
					    	<h:outputText value="#{entry.title}" />
					    </p:column>

					    <p:column headerText="#{msg.resources}" >
					    	<h:outputText value="#{entry.resources}" />
					    </p:column>

					    <p:column headerText="#{msg.thumb_ratings}" >
					   		<h:outputText value="#{entry.thumb_ratings}" />
					    </p:column>

					    <p:column headerText="#{msg.star_ratings}" >
					    	<h:outputText value="#{entry.star_ratings}" />
					    </p:column>

					    <p:column headerText="#{msg.comments}" >
					    	<h:outputText value="#{entry.comments}" />
					    </p:column>

					    <p:column headerText="#{msg.tags}" >
					    	<h:outputText value="#{entry.tags}" />
					    </p:column>

					  	<p:column headerText="#{msg.no_of_archived_versions}" >
					    	<h:outputText value="#{entry.no_of_archived_versions}" />
					    </p:column>

					  	<p:column headerText="#{msg.no_of_archived_resources}" >
					    	<h:outputText value="#{entry.no_of_archived_resources}" />
					    </p:column>

					    <p:column headerText="#{msg.forum_topics}" >
					    	<h:outputText value="#{entry.forum_topics}" />
					    </p:column>

					    <p:column headerText="#{msg.forum_posts}" >
					  		<h:outputText value="#{entry.forum_posts}" />
					    </p:column>

					</p:dataTable>




<!--				<p:panel header="" rendered="#{adminStatisticsBean.showDetails}" style="margin-top:30px;">

				</p:panel>-->

			<ui:fragment rendered="#{adminStatisticsBean.showDetails}" >
				<p:panel header="#{msg.statistics_detailed}">
						<div class="boolean-buttons">
							<p:selectBooleanButton offLabel="#{msg.toggle_description}" onLabel="#{msg.toggle_description}"
												   onchange="$('.description').toggle();" value="off" />
							<p:selectBooleanButton offLabel="#{msg.toggle_comments}" onLabel="#{msg.toggle_comments}"
												   onchange="$('.admin_comments').toggle();" value="on" />

						</div>

						<hr />
						<h:outputText value="#{adminStatisticsBean.detailedDescription}" escape="false" />
				</p:panel>
			</ui:fragment>

		</h:form>

	</ui:define>
</ui:composition>