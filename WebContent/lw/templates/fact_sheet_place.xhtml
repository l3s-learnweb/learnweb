<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:composition>
		<h:outputScript library="js" name="jquery.montage.min.js" target="head"/>
		<div id="fact_sheet_wrapper">
			<div id="fact_sheet_image_wrapper" style="height: 184px">
				<h:outputLink value="search.jsf">
					<f:param name="action" value="image"></f:param>
					<div id="more_images_box">
						More Images
					</div>
				</h:outputLink>
				
				<table>
					<tr>
						<td id="fact_sheet_first_image_td">
							<ui:fragment rendered="#{searchBean.graph.entities[0].thumbnail != ''}">
								<div id="fact_sheet_first_image">
									<img onerror="this.style.display='none';" src="#{searchBean.graph.entities[0].thumbnail}"></img>
								</div>
							</ui:fragment>
						</td>
						<td>
							<div id="am-container" class="am-container fact_sheet_images">
								<ui:repeat var="image" value="#{searchBean.images.resources}">
									<a href=""><img src="#{image.thumbnail2.url}"></img></a>
								</ui:repeat>
							</div>
						</td>
					</tr>
				</table>
			</div>
			<div id="fact_sheet_contents">
				<div id="fact_sheet_label">#{searchBean.graph.entities[0].label}</div>
				<div id="fact_sheet_description">#{searchBean.graph.entities[0].description}</div>
				<ui:fragment rendered="#{searchBean.graph.entities[0].capital != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Capital : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].capital}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].dialingCode != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Dialing Code : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].dialingCode}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].languages != '' and searchBean.graph.entities[0].languages != 'none'}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Languages : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].languages}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].governmentType != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Government Type : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].governmentType}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].nationalAnthem != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">National Anthem : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].nationalAnthem}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].currencies != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Currencies : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].currencies}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].country != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Country : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].country}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].area != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Total Area : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].area} sq. km.</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].governor != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Governor : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].governor}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].population != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Population (as of #{searchBean.graph.entities[0].populationAsOf}) : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].population}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].senators != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Senators : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].senators}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].state != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">State : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].state}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities[0].timeZone != ''}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Time Zone : </span><span class="fact_sheet_value">#{searchBean.graph.entities[0].timeZone}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities.size() gt 1}">
					<div id="related_search">Related Links</div>
					<ul id="related_search_list">
						<ui:repeat var="entity" value="#{searchBean.graph.entities.subList(1,searchBean.graph.entities.size())}">
							<li><a target="_new" href="#{entity.url}">#{entity.label}</a></li>
						</ui:repeat>
					</ul>
				</ui:fragment>
			</div>
		</div>
		<script type="text/javascript">
			$(function() {
				// initialize the plugin
				var $container 	= $('#am-container'),
					$imgs		= $container.find('img').hide(),
					totalImgs	= $imgs.length,
					cnt			= 0;
				$imgs.each(function(i) {
					var $img	= $(this);
					$('<img/>').load(function() {
						++cnt;
						if( cnt === totalImgs ) {
							$imgs.show();
							$container.montage({
								fluid: false,
								minsize	: false,
								fixedHeight: 90,
								margin 	: 1
							});
						}
					}).attr('src',$img.attr('src'));
				});
			});
		</script>
	</ui:composition>
</html>