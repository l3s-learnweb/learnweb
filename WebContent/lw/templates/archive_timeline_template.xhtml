<ui:composition 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

		<h:outputScript library="archive-timeline" name="highcharts.js" target="head"/>
		
		<h:outputScript library="js" name="jquery.tooltipster.min.js" target="head"/>
		<h:outputStylesheet library="css" name="tooltipster.css"/>	
	
		<h:outputScript library="archive-timeline" name="responsive-calendar.js" target="head"/>
		<h:outputStylesheet library="archive-timeline" name="responsive-calendar.css"/>
		
		<h:outputScript library="archive-timeline" name="archive_timeline_template.js" target="head"/>
		<h:outputStylesheet library="archive-timeline" name="archive_timeline.css"/>
	 
		<script>
			Highcharts.setOptions({
				lang: {
						months: ${resourceDetailBean.monthNames},
						shortMonths: ${resourceDetailBean.shortMonthNames},
						resetZoom: '#{msg.resetZoom}',
						resetZoomTitle: '#{msg.resetZoomTitle}'
				}
			});
			
			var no_of_versions = '#{msg.no_of_versions}';
			var timeline_title = '#{msg.archive_timeline_title}';
			var timeline_series_name = '#{msg.archive_timeline_series_name}';
			var msgClickZoom = '#{msg.archive_timeline_click_zoom}';
			var msgTouchZoom = '#{msg.archive_timeline_touch_zoom}';
			
			loadTimeline(#{resourceDetailBean.highChartsJsonData});
			//loadCalendar(#{resourceDetailBean.calendarJsonData});

			$.fn.tooltipster('setDefaults', {
				interactive: true,
		    	interactiveTolerance: 150,
		    	theme:'tooltipster-custom-theme'
			});
			
			$('.responsive-calendar').responsiveCalendar();
			function loadCalendar(calendar_data){
				$('.responsive-calendar').responsiveCalendar({
					allRows: false,
					translateMonths: ${resourceDetailBean.monthNames},
					events: calendar_data,
				    onActiveDayHover: function(events) {
					    var thisDayEvent, key;
					    key = $(this).data('year')+'-'+addLeadingZero( $(this).data('month') )+'-'+addLeadingZero( $(this).data('day') );
					    thisDayEvent = events[key];
						if(!$(this).hasClass('tooltipstered'))
					    {
							$(this).tooltipster({
					    	content:$(archiveVersionsList(thisDayEvent))
					    	});
					    }
					    $(this).tooltipster("show");
					} 
				});
			}
		</script>	
		<br/>
		<div class='box'>
		<h:panelGroup layout="block" id="container"></h:panelGroup>
		<div id="calendar">
			<!-- Responsive calendar - START -->
			<div class="responsive-calendar">
				<div class="controls">
					<a class="pull-left" data-go="prev"><h:panelGroup layout="block" class="btn btn-primary" style="background-color:#489a83;border-color: #3b8b74;">
							#{msg.previous}
						</h:panelGroup></a>
					<h4 id="head-year-month">
						<span id="year" data-head-year="data-head-year"></span> <span id="month" data-head-month="data-head-month"></span>
					</h4>
					<a class="pull-right" data-go="next"><h:panelGroup layout="block" class="btn btn-primary" style="background-color:#489a83;border-color: #3b8b74;">
							#{msg.next} 
						</h:panelGroup>
					</a>
				</div>
				<hr />
				<h:panelGroup layout="block" class="day-headers">
					<ui:repeat var="day" value="${resourceDetailBean.shortWeekDays}">
						<h:panelGroup layout="block" class="day header">#{day}</h:panelGroup>
					</ui:repeat>
				</h:panelGroup>
				<div class="days" data-group="days">
					<!-- the place where days will be generated -->
				</div>
			</div>
			<!-- Responsive calendar - END -->
			<h:outputLink style="float:right;color:#489a83" onclick="return open_timeline();">#{msg.back_to_timeline_view}</h:outputLink>
		</div>
		</div>
	
</ui:composition>	