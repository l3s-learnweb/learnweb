<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:composition>
		<h:outputScript library="js" name="jquery.montage.min.js" target="head"/>
		<div id="fact_sheet_wrapper">
			<div id="fact_sheet_image_wrapper" style="height: 184px">
				<h:outputLink value="search.jsf">
					<f:param name="action" value="image"></f:param>
					<div id="more_images_box">
						More Images
					</div>
				</h:outputLink>
				
				<table>
					<tr>
						<td id="fact_sheet_first_image_td">
							<ui:fragment rendered="#{searchBean.graph.entities[0].thumbnail != ''}">
								<div id="fact_sheet_first_image">
									<img onerror="this.style.display='none';" src="#{searchBean.graph.entities[0].thumbnail}"></img>
								</div>
							</ui:fragment>
						</td>
						<td>
							<div id="am-container" class="am-container fact_sheet_images">
								<ui:repeat var="image" value="#{searchBean.images.resources}">
									<a href=""><img src="#{image.thumbnail2.url}"></img></a>
								</ui:repeat>
							</div>
						</td>
					</tr>
				</table>
			</div>
			<div id="fact_sheet_contents">
				<div id="fact_sheet_label">#{searchBean.graph.entities[0].label}</div>
				<div id="fact_sheet_description">#{searchBean.graph.entities[0].description}</div>
				<ui:fragment rendered="#{not empty searchBean.graph.entities[0].homepage}">
					<div class="fact_sheet_detail">
						<span class="fact_sheet_field">Homepage: </span><span class="fact_sheet_value"><a target="_new" href="//#{searchBean.graph.entities[0].homepage}">#{searchBean.graph.entities[0].homepage}</a></span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{not empty searchBean.graph.entities[0].foundedBy}">
					<div class="fact_sheet_detail">
						<h:outputText value="#{msg.Founded_by}: " styleClass="fact_sheet_field" /><span class="fact_sheet_value">#{searchBean.graph.entities[0].foundedBy}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{not empty searchBean.graph.entities[0].foundingDate }">
					<div class="fact_sheet_detail">
						<h:outputText value="#{msg.Founding_date}: " styleClass="fact_sheet_field" /><span class="fact_sheet_value">#{searchBean.graph.entities[0].foundingDate}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{empty searchBean.graph.entities[0].foundingDate and not empty searchBean.graph.entities[0].launchDate}">
					<div class="fact_sheet_detail">
						<h:outputText value="#{msg.Launch_date}: " styleClass="fact_sheet_field" /><span class="fact_sheet_value">#{searchBean.graph.entities[0].launchDate}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{empty searchBean.graph.entities[0].foundingDate and empty searchBean.graph.entities[0].launchDate  and not empty searchBean.graph.entities[0].foundingYear}">
					<div class="fact_sheet_detail">
						<h:outputText value="#{msg.Founding_year}: " styleClass="fact_sheet_field" /><span class="fact_sheet_value">#{searchBean.graph.entities[0].foundingYear}</span>
					</div>
				</ui:fragment>
				
				<ui:fragment rendered="#{not empty searchBean.graph.entities[0].industry}">
					<div class="fact_sheet_detail">
						<h:outputText value="#{msg.Industry}: " styleClass="fact_sheet_field" /><span class="fact_sheet_value">#{searchBean.graph.entities[0].industry}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{not empty searchBean.graph.entities[0].companyType}">
					<div class="fact_sheet_detail">
						<h:outputText value="#{msg.Company_type}: " styleClass="fact_sheet_field" /><span class="fact_sheet_value">#{searchBean.graph.entities[0].companyType}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{not empty searchBean.graph.entities[0].areaServed}">
					<div class="fact_sheet_detail">
						<h:outputText value="#{msg.Area_served}: " styleClass="fact_sheet_field" /><span class="fact_sheet_value">#{searchBean.graph.entities[0].areaServed}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{not empty searchBean.graph.entities[0].numberOfEmployees}">
					<div class="fact_sheet_detail">
						<h:outputText value="#{msg.Number_of_employees}: " styleClass="fact_sheet_field" /><span class="fact_sheet_value">#{searchBean.graph.entities[0].numberOfEmployees}</span>
					</div>
				</ui:fragment>
				<ui:fragment rendered="#{searchBean.graph.entities.size() gt 1}">
					<div id="related_search">Related Links</div>
					<ul id="related_search_list">
						<ui:repeat var="entity" value="#{searchBean.graph.entities.subList(1,searchBean.graph.entities.size())}">
							<li><a target="_new" href="#{entity.url}">#{entity.label}</a></li>
						</ui:repeat>
					</ul>
				</ui:fragment>
			</div>
		</div>
		<script type="text/javascript">
			$(function() {
				// initialize the plugin
				var $container 	= $('#am-container'),
					$imgs		= $container.find('img').hide(),
					totalImgs	= $imgs.length,
					cnt			= 0;
				$imgs.each(function(i) {
					var $img	= $(this);
					$('<img/>').load(function() {
						++cnt;
						if( cnt === totalImgs ) {
							$imgs.show();
							$container.montage({
								fluid: false,
								minsize	: false,
								fixedHeight: 90,
								margin 	: 1
							});
						}
					}).attr('src',$img.attr('src'));
				});
			});
		</script>
	</ui:composition>
</html>