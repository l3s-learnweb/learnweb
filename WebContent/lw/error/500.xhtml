<ui:composition template="/WEB-INF/templates/layout/template-error.xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:p="http://primefaces.org/ui"
				xmlns:of="http://omnifaces.org/functions">

<ui:param name="pageTitle" value="#{msg['error_pages.server_error']}"/>

<ui:define name="container_layout">
	<p:panel header="#{msg['error']} 500: #{msg['error_pages.server_error']}" styleClass="ui-widget-danger">
		<h:outputText styleClass="h5 d-block" value="#{msg['error_pages.server_error_default_description']} #{msg['error_pages.automatic_report']}"/>
		<h:outputText styleClass="text-muted" value="#{msg['error_pages.contact_administrator']}"/>
        <a href="#{request.contextPath}/lw/contact.jsf">#{msg['contact']}</a>

		<pre class="mt-3 mb-0 collapse overflow-scroll" style="max-height: 340px;">
			<h:outputText value="Message: #{requestScope['javax.servlet.error.message']}"/><br/>
			<h:outputText value="Stack trace: #{of:printStackTrace(requestScope['javax.servlet.error.exception'])}" escape="false"/>
		</pre>

		<h:outputScript>$('.ui-panel-content .h5').on('click', () => $('.collapse').fadeIn());</h:outputScript>
	</p:panel>
</ui:define>

</ui:composition>