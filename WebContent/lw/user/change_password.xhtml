<ui:composition template="/WEB-INF/templates/layout/template.xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:p="http://primefaces.org/ui">

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="u" value="#{passwordChangeBean.parameter}"/>
			<f:viewAction action="#{passwordChangeBean.checkParameter}"/>
		</f:metadata>
	</ui:define>

	<ui:param name="pageTitle" value="#{msg.change_password}"/>
	<ui:param name="loginRequired" value="false"/>
	<ui:param name="smallPage" value="true"/>
	<ui:param name="disableGrowl" value="true"/>
    <ui:param name="hideBreadcrumbs" value="true"/>

	<ui:define name="center_layout">

		<p:panel header="#{msg.change_password}" rendered="#{not empty passwordChangeBean.user}">
			<h:form id="passwordform" styleClass="mw-md">
				<input type="hidden" name="u" value="#{passwordChangeBean.parameter}"/>

				<div class="form-group">
					<p:outputLabel for="@next" value="#{msg.new_password}:" indicateRequired="false"/>
					<p:password id="password" value="#{passwordChangeBean.password}" feedback="true"
						promptLabel="#{msg.passwordStrength_prompt}" weakLabel="#{msg.passwordStrength_weak}"
						goodLabel="#{msg.passwordStrength_good}" strongLabel="#{msg.passwordStrength_strong}" label="#{msg.new_password}">
					</p:password>
					<p:message for="@previous"/>
				</div>

				<div class="form-group">
					<p:outputLabel for="@next" value="#{msg.confirm_password}:" indicateRequired="false"/>
					<p:password id="confirm_password" value="#{passwordChangeBean.confirmPassword}" feedback="true" validator="#{passwordChangeBean.validatePassword}"
						promptLabel="#{msg.passwordStrength_prompt}" weakLabel="#{msg.passwordStrength_weak}" goodLabel="#{msg.passwordStrength_good}"
						strongLabel="#{msg.passwordStrength_strong}" label="#{msg.confirm_password}">
					</p:password>
					<p:message for="@previous"/>
				</div>

				<p:commandButton actionListener="#{passwordChangeBean.onChangePassword()}" value="#{msg.save}" ajax="false"/>
			</h:form>
		</p:panel>
	</ui:define>
</ui:composition>
