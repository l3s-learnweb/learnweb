<ui:composition template="/WEB-INF/templates/layout/template.xhtml"
				xmlns="http://www.w3.org/1999/xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:p="http://primefaces.org/ui">

    <ui:param name="loginRequired" value="true"/>
    <ui:param name="pageTitle" value="#{msg.myProfileTitle}"/>
    <ui:param name="smallPage" value="true"/>
    <ui:param name="rightPane" value="true"/>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="user_id" value="#{userDetailBean.userId}" required="true"/>
			<f:viewAction action="#{userDetailBean.loadUser}"/>
		</f:metadata>
	</ui:define>

	<ui:define name="breadcrumb_ext">
		<p:menuitem value="#{msg.myProfileTitle} #{msg.of} #{userDetailBean.user.username}" url="user/detail.jsf?user_id=#{userDetailBean.user.id}"/>
	</ui:define>

	<ui:define name="center_layout">
		<p:panel header="#{msg.last_activities}" id="profile_news">
			<h:outputText value="This information is hidden due to the privacy settings of your organization." rendered="#{userDetailBean.pageHidden}"/>

			<ui:fragment rendered="#{not userDetailBean.pageHidden}">
				<p:repeat value="#{newsFeedBean.newsList}" var="logEntry" varStatus="status">
					<ui:decorate template="/WEB-INF/templates/blocks/user/log-entry.xhtml">
						<ui:param name="status" value="#{status}"/>
						<ui:param name="logEntry" value="#{logEntry}"/>
					</ui:decorate>
				</p:repeat>
			</ui:fragment>
		</p:panel>
	</ui:define>

	<ui:define name="right_layout">
		<p:panel rendered="#{userBean.loggedIn}" styleClass="m-0 px-0 bg-transparent no-border">

			<h:outputText value="This information is hidden due to the privacy settings of your organization." rendered="#{userDetailBean.pageHidden}"/>

				<ui:decorate template="/templates/user/profile.xhtml">
					<ui:param name="user" value="#{userDetailBean.user}"/>
				</ui:decorate>

		</p:panel>
	</ui:define>
</ui:composition>
