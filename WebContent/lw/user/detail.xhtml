<!DOCTYPE html>
<html 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/templates/main/main_old.xhtml">

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="user_id" value="#{userDetailBean.userId}" required="true" />
			<f:viewAction action="#{userDetailBean.loadUser}"/>
		</f:metadata>
	</ui:define>

	<ui:param name="loginRequired" value="true" />
	<ui:param name="pageTitle" value="#{msg.myProfileTitle}" />
	<ui:param name="smallPage" value="true" />

	<ui:define name="center_layout">
		<div class="page_header">
			<span>
				#{msg.last_activities}
			</span> 
			#{msg.of} #{userDetailBean.user.username}
		</div>		
		
		<h:outputText value="This information is hidden due to the privacy settings of your organization." rendered="#{userDetailBean.pageHidden}" />
		<h:panelGroup id="profile_news" rendered="#{not userDetailBean.pageHidden}">		
			<ui:decorate template="/templates/user/logs.xhtml">
				<ui:param name="news" value="#{newsFeedBean.newslist}"/>
			</ui:decorate >
		</h:panelGroup>
	</ui:define>
	
	
	<ui:define name="right_layout">

		<p:layoutUnit position="east" size="38%" resizable="false" closable="false" 
			collapsible="false" style="border: none;" id="right_pane" rendered="#{userBean.loggedIn}">			
			
			<h:outputText value="This information is hidden due to the privacy settings of your organization." rendered="#{userDetailBean.pageHidden}" />
			<h:panelGroup  rendered="#{not userDetailBean.pageHidden}" layout="block" style="width:90%; position:relative; margin-left:auto; margin-right:auto;">
			
				<ui:decorate template="/templates/user/profile.xhtml">
					<ui:param name="user" value="#{userDetailBean.user}" />		
				</ui:decorate>
				
			</h:panelGroup>
		</p:layoutUnit>
	</ui:define>
</ui:composition>
</html>