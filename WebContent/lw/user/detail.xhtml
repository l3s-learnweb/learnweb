<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
	xmlns="http://www.w3.org/1999/xhtml" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" 
	xmlns:p="http://primefaces.org/ui">

<ui:composition template="/lw/templates/new_main_t.xhtml"> 

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="user_id" value="#{userDetailBean.userId}" required="true" />
		
			<f:event type="javax.faces.event.PreRenderViewEvent" listener="#{userDetailBean.loadUser}" />
		</f:metadata>
	</ui:define>

	<ui:param name="loginRequired" value="true" />
	<ui:param name="pageTitle" value="#{msg.myProfileTitle}" />
	<ui:param name="smallPage" value="true" />

	<ui:define name="center_layout">
		<h:panelGroup id="profile_news">		
			<ui:decorate template="/lw/templates/activity_stream.xhtml">
				<ui:param name="news" value="#{newsFeedBean.newslist}"/>
			</ui:decorate >
		</h:panelGroup>
	</ui:define>
	
	
	<ui:define name="right_layout">
	<style>
		#user_informations, #user_groups, #last_activities{
			display:block;
			padding: 5px 15px;
			font-weight:bold;
		}
		#user_informations:hover, #user_groups:hover{
			text-decoration:underline;
			background-color:#eee;
		}
		.active{background-color:#eee;}
		#group_table{
			border:1px solid #A8A8A8;
			padding:0.5em 1em;
		}
		#group_header{
			border:1px solid #ddd;
			background-color:#eee;
			margin-bottom:5px;
			padding:10px;
			font-weight:bold;
		}
	</style>
		<p:layoutUnit position="east" size="38%" resizable="false" closable="false" collapsible="false" style="border: none;"  id="right_pane" rendered="#{userBean.loggedIn}">
			<div style="width:90%; position:relative; margin-left:auto; margin-right:auto;">
	
				<div id="group_header">
					<span class="group_header">#{msg.myProfileTitle}</span> #{msg.of} #{userDetailBean.user.username}
				</div>
		
				<p:panel id="informations_table">
					<h:panelGrid columns="2" class="float-left" style="width:70%; margin-right:30px;">
						<h:outputText value="#{msg.username}:" />
						<h:outputText id="username" value="#{userDetailBean.user.username}" />
		
						<h:outputText value="#{msg.email_address}:"/>
						<h:outputText value="#{userDetailBean.user.email}"/>
		
						<h:outputText value="#{msg.gender}:" />
						<h:outputText value="--" rendered="#{userDetailBean.user.gender == 0}" />					
						<h:outputText value="#{msg.gender_male}" rendered="#{userDetailBean.user.gender == 1}" />
						<h:outputText value="#{msg.gender_female}" rendered="#{userDetailBean.user.gender == 2}" />				
						
						<h:outputText value="#{msg.address}:" />
						<h:outputText value="#{userDetailBean.user.address}"/>
		
						<h:outputText value="#{msg.profession}:"/>
						<h:outputText value="#{userDetailBean.user.profession}"/>
		
						<h:outputText value="#{msg.interest}:" rendered="#{not empty userDetailBean.user.interest}" />
						<h:outputText value="#{userDetailBean.user.interest}" rendered="#{not empty userDetailBean.user.interest}" />
		
						<h:outputText value="#{msg.additionalinformation}:" rendered="#{not empty userDetailBean.user.additionalInformation}" />
						<h:outputText value="#{userDetailBean.user.additionalInformation}" rendered="#{not empty userDetailBean.user.additionalInformation}" />
					
						<h:outputText value="#{msg.registered_since}:" />
						<h:outputText value="#{userDetailBean.user.registrationDate}">
							<f:convertDateTime dateStyle="default" type="date" timeZone="#{userBean.timeZone}" />
						</h:outputText>
					</h:panelGrid>
					
					<h:graphicImage height="100" width="100" value="${learnwebBean.getProfileImage(userDetailBean.user)}" id="profile_image" alt="profile image"/>
					<br class="clear" />
				 </p:panel>
		<br/>
		<br/>

				<div id="group_header">
						<span class="group_header">#{msg.groupsTitle}</span> #{msg.of} #{userDetailBean.user.username}
				</div>
				<div id="group_table" style="display:block;">
					<ui:repeat var="group" value="#{userDetailBean.user.groups}">
						<div class="float-left" style="width:33%">		
							<h:outputLink value="group/overview.jsf">
								<f:param name="group_id" value="#{group.id}" />
								<h:outputText value="#{group.title}" />
							</h:outputLink>
						</div>	
					</ui:repeat>
					<br class="clear"/>
				</div>
				
			</div>
		</p:layoutUnit>
	</ui:define>
</ui:composition>
</html>