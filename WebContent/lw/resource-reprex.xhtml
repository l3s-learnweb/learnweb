<ui:composition template="/WEB-INF/templates/layout/template.xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:p="http://primefaces.org/ui">

<ui:param name="pageTitle" value="#{resourceDetailBean.resource.title}"/>

<ui:define name="metadata">
	<f:metadata>
		<f:viewParam name="resource_id" value="#{resourceDetailBean.resourceId}" required="true"/>
		<f:viewAction action="#{resourceDetailBean.onLoad}"/>
	</f:metadata>
</ui:define>

<ui:define name="body_content">
	<ui:fragment rendered="#{userBean.loggedIn and userBean.admin}">
		<div class="res-view">
			<div class="row no-gutters">
				<div class="col res-view-embedded d-flex flex-column">
					<div class="preview-wrapper d-flex flex-column">
						<ui:fragment rendered="#{userBean.admin}">
							<!-- some tests -->
							<h:form id="updatetest">

								<p:commandButton value="dummy button" styleClass="alt-btn" actionListener="#{resourceDetailBean.cancelEdit()}" process="@form" update=":updatetestpanel" />
							</h:form>

							<h:panelGroup id="updatetestpanel"></h:panelGroup>
						</ui:fragment>
					</div>
				</div>

				<div class="col-12 col-lg-4 col-xl-3 res-view-details">
					<div class="res-view-panel">
						<p:repeat value="#{resourceDetailBean.resource.logs}" var="logEntry" varStatus="status">
							<ui:decorate template="/WEB-INF/templates/blocks/user/log-entry.xhtml">
								<ui:param name="showPreview" value="false"/>
								<ui:param name="status" value="#{status}"/>
								<ui:param name="logEntry" value="#{logEntry}"/>
							</ui:decorate>
						</p:repeat>
					</div>
				</div>
			</div>
		</div>
	</ui:fragment>
</ui:define>

</ui:composition>
