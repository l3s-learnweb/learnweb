<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:composition template="/templates/main/main_old.xhtml">
	
		<ui:param name="loginRequired" value="true" />
		<ui:param name="pageTitle" value="#{msg.notification}" />
	
		<ui:define name="right_layout">
			<p:layoutUnit position="east" size="38%" resizable="false" closable="false" collapsible="false" style="border: none;" 
				id="right_pane" rendered="#{userBean.loggedIn}">
				<div style="width:90%; position:relative; margin-left:auto; margin-right:auto;"></div>
			</p:layoutUnit>
		</ui:define>
	
		<ui:define name="center_layout" >
		
			<h:panelGroup layout="block" rendered="#{userBean.moderator}" style="border:1px solid #ccc; padding:0.5em 1rem; margin:0 4px;">
				<h:outputText value="#{msg.moderator}: " style="font-weight:bold;" />
				<a href="#{request.contextPath}/lw/admin/notification.jsf">
					<h:outputText value="#{msg.send_notification}" />
				</a>
			</h:panelGroup>
			
			<h:outputText value="#{msg.no_notifications}" rendered="#{empty messageBean.receivedMessages}" styleClass="page_header" 
				style="display:block; margin:4px;"/>
			
			<ui:repeat var="message" value="#{messageBean.receivedMessages}">
			
				<div class="#{message.read ? 'read' : 'notRead'}" style="padding:4px;">
				
					<div class="page_header">
						<img id="userpic" src="#{message.fromUser.image}" width="30" height="30" style="margin-right:10px;margin-top:-2px" 
							alt="Profile picture" class="float-left"/> 
						<span>
							<h:outputText value="#{message.title} "></h:outputText>
						</span>
						#{msg.from_user} #{message.fromUser.username} 
						<span style="color: grey;font-size:1.2rem;">
							#{msg.on_date} 
							<h:outputText value="#{message.time}">
								<f:convertDateTime type="both" timeStyle="short" dateStyle="long" timeZone="#{userBean.timeZone}"/>
							</h:outputText>
						</span>
						<h:outputText value="#{msg.new_word}" style="color:red; font-size: 1.2rem !important;font-weight:bold;" 
							rendered="#{not message.read}"/>
					
					</div>
					
					<div class="page_content">
						<h:outputText escape="false" value="#{message.text}"/>
					</div>				
					<br/>
					
				</div>	
				
			</ui:repeat>
			
		</ui:define>
	</ui:composition>
</html>