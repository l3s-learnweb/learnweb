<ui:composition
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:pt="http://xmlns.jcp.org/jsf/passthrough">

    <h:panelGroup id="datagrid" styleClass="datagrid" layout="block">
        <h:panelGroup id="folderGrid" styleClass="folder-grid" layout="block">
            <ui:repeat value="#{groupDetailBean.subfolders}" var="folder">
                <h:panelGroup styleClass="folder-item group-resources-item" layout="block"
                              pt:data-itemType="folder"
                              pt:data-itemId="#{folder.folderId}"
                              pt:data-canViewResource="#{folder.canViewResource(userBean.user)}"
                              pt:data-canEditResource="#{folder.canEditResource(userBean.user)}"
                              pt:data-canDeleteResource="#{folder.canDeleteResource(userBean.user)}">
                    <div class="folder-block">

                        <div class="folder-icon">
                            <div class="folder-icon-wrapper">
                                <span class="icon icon-folder"/>
                            </div>
                        </div>

                        <div class="folder-title">
                            <div class="folder-title-wrapper">
                                <h:outputText value="#{folder.name}" escape="false" styleClass="folder-title-name" title="#{folder.name}"/>
                            </div>

                            <h:panelGroup class="resource-controls" layout="block" rendered="${folder.canEditResource(userBean.user)}">
                                <h:outputLink value="#" title="#{msg.edit}" styleClass="action-edit">
                                    <h:graphicImage alt="Edit" value="../resources/icon/Edit.png"/>
                                </h:outputLink>
                            </h:panelGroup>
                            <h:panelGroup class="resource-controls" layout="block" rendered="${folder.canDeleteResource(userBean.user)}">
                                <h:outputLink value="#" title="#{msg.delete}" styleClass="action-delete">
                                    <h:graphicImage alt="Remove" value="../resources/icon/Remove.png"/>
                                </h:outputLink>
                            </h:panelGroup>
                        </div>

                    </div>
                </h:panelGroup>
            </ui:repeat>
        </h:panelGroup>

        <h:panelGroup id="resourceGrid" styleClass="resource-grid" layout="block">
            <ui:repeat value="#{groupDetailBean.paginator.currentPage}" var="res">
                <!--@elvariable id="res" type="de.l3s.learnweb.ResourceDecorator"-->
                <h:panelGroup styleClass="resource-item group-resources-item" layout="block"
                              pt:data-itemType="resource"
                              pt:data-itemId="#{res.resource.id}"
                              pt:data-canViewResource="#{res.resource.canViewResource(userBean.user)}"
                              pt:data-canEditResource="#{res.resource.canEditResource(userBean.user)}"
                              pt:data-canDeleteResource="#{res.resource.canDeleteResource(userBean.user)}"
                              pt:data-canAnnotateResource="#{res.resource.canAnnotateResource(userBean.user)}">
                    <div class="resource-block">

                        <div class="resource-preview">
                            <div class="resource-preview-wrapper">
                                <div class="resource-preview-wrapper2">
                                    <div class="resource-preview-block"></div>
                                    <img class="resource-preview-image" src="#{res.resource.smallThumbnail.url}" alt="#{res.title}"
                                         title="#{res.title}"></img>
                                </div>
                            </div>

                            <h:panelGroup class="resource-controls" layout="block">
                                <h:outputLink value="#" title="#{msg.copy}" styleClass="action-copy">
                                    <h:graphicImage alt="Copy" value="/resources/icon/Add.png"/>
                                </h:outputLink>

                                <ui:fragment rendered="${res.resource.canEditResource(userBean.user)}">
                                    <h:outputLink value="#" title="#{msg.edit}" styleClass="action-edit">
                                        <h:graphicImage alt="Edit" value="../resources/icon/Edit.png"/>
                                    </h:outputLink>
                                </ui:fragment>

                                <ui:fragment rendered="${res.resource.canDeleteResource(userBean.user)}">
                                    <h:outputLink value="#" title="#{msg.delete}" styleClass="action-delete">
                                        <h:graphicImage alt="Delete" value="../resources/icon/Remove.png"/>
                                    </h:outputLink>
                                </ui:fragment>
                            </h:panelGroup>
                        </div>

                        <div class="resource-title">
                            <div class="resource-title-wrapper">
                                <div class="resource-title-text">
                                    <h:outputText value="#{res.title}" escape="false" styleClass="resource-title-name" title="#{res.title}"/>
                                    <span class="resource-title-summary">
                                        <span>${utilBean.getLocaleMessage(res.type)}</span> #{msg.added_by}
                                        <span>#{res.ownerUser.username}</span>
                                    </span>
                                </div>
                            </div>
                        </div>

                    </div>
                </h:panelGroup>
            </ui:repeat>
        </h:panelGroup>

        <h:outputText value="${msg.no_resources_found}" class="nothing_found"
                      rendered="#{groupDetailBean.paginator.isEmpty() and groupDetailBean.paginator.getClass().getSimpleName() eq 'GroupPaginator'}"/>

        <h:outputText value="#{msg.no_results_found}" class="nothing_found"
                      rendered="#{groupDetailBean.paginator.isEmpty() and groupDetailBean.paginator.getClass().getSimpleName() eq 'SearchPaginator'}"/>

    </h:panelGroup>

</ui:composition>