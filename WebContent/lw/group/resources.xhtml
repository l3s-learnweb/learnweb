<ui:composition template="/WEB-INF/templates/layout/template.xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:lw="http://l3s.de/learnweb">

<ui:param name="hideGrowl" value="false"/>
<ui:param name="helpText" value="#{msg.groupResourceHelp}"/>
<ui:param name="pageTitle" value="#{groupResourcesBean.group.title} - #{msg.resources}"/>

<ui:define name="metadata">
    <f:metadata>
        <f:viewParam name="group_id" value="#{groupResourcesBean.groupId}" required="true"/>
        <f:viewParam name="folder_id" value="#{groupResourcesBean.folderId}"/>
        <f:viewAction action="#{groupResourcesBean.onLoad}"/>
    </f:metadata>
</ui:define>

<ui:define name="breadcrumb">
    <lw:breadcrumb-item link="myhome/groups.jsf" title="#{msg.myGroups}">
        <ui:decorate template="/WEB-INF/templates/blocks/breadcrumb/nav_list_first.xhtml"/>
    </lw:breadcrumb-item>

    <lw:breadcrumb-item link="group/resources.jsf?group_id=#{groupResourcesBean.groupId}" title="#{groupResourcesBean.group.title}" >
        <p:repeat var="groups" value="#{userBean.user.groups}">
            <li><a href="group/resources.jsf?group_id=#{groups.id}">#{groups.title}</a></li>
        </p:repeat>
    </lw:breadcrumb-item>

    <lw:breadcrumb-item link="group/resources.jsf?group_id=#{groupResourcesBean.groupId}" title="#{msg.resources}">
        <ui:decorate template="/WEB-INF/templates/blocks/breadcrumb/nav_list_my_groups.xhtml">
            <ui:param name="groupId" value="#{groupResourcesBean.groupId}"/>
        </ui:decorate>
    </lw:breadcrumb-item>
</ui:define>

<ui:define name="center_layout">
    <h:outputStylesheet library="vendor" name="fancybox-v3.5.7/jquery.fancybox.min.css"/>
    <h:outputScript library="vendor" name="fancybox-v3.5.7/jquery.fancybox.min.js" target="body"/>
    <h:outputScript library="vendor" name="contextMenu-v2.9.0/jquery.contextMenu.min.js" target="body"/>
    <h:outputScript library="layout" name="js/group-resources.js" target="body"/>

    <ui:fragment rendered="#{groupResourcesBean.group ne null}">
        <ui:fragment rendered="${not groupResourcesBean.group.canViewResources(userBean.user)}">
            <h3 class="error">
                <h:outputText value="#{msg.group_resources_access_denied}"/>
                <h:outputText value="#{msg.group_resources_access_denied_join_first}"
                              rendered="${groupResourcesBean.group.policyView != 'GROUP_LEADER' and groupResourcesBean.group.canJoinGroup(userBean.user)}"/>
            </h3>
        </ui:fragment>

        <ui:fragment rendered="#{groupResourcesBean.group.canViewResources(userBean.user)}">
            <ui:decorate template="/WEB-INF/templates/blocks/resources/resources.xhtml"/>
        </ui:fragment>
    </ui:fragment>
</ui:define>
</ui:composition>
