<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core" 
	xmlns:p="http://primefaces.org/ui">


<f:metadata>
	<f:viewParam name="instance_id" value="#{accessBean.instanceId}" />
	<f:viewParam name="context_level" value="#{accessBean.contextLevel}" />
</f:metadata>

<ui:composition template="/lw/templates/new_main.xhtml">
	
	<ui:param name="loginRequired" value="true"/>
	<ui:param name="pageTitle" value="Manage Rights" />
	
	<ui:define name="center_layout">
		<h:form id="edit_rights" style="margin:5px 20px; " >
			<p:accordionPanel>  
			    <p:tab rendered="#{accessBean.isOrganisation}" title="Organisation Rights">  
			        <p:dataTable var="right_roles" value="#{accessBean.organisationAccessMatrix}">
		                <p:column headerText="Rights" style="text-align:center" >  
		                    <h:outputText value="#{right_roles.right}" />  
		                </p:column>  
		  				
		  				<p:column headerText="Moderator" style="text-align:center" rendered="#{accessBean.isOrganisation}">  
		                    <p:selectBooleanCheckbox value="#{right_roles.moderator}" />  
		                </p:column>  
		  				
		                <p:column headerText="Group Creator" style="text-align:center" rendered="#{accessBean.isCourse or accessBean.isOrganisation}">  
		                    <p:selectBooleanCheckbox value="#{right_roles.groupCreator}" />  
		                </p:column>  
		  
		                <p:column headerText="Resource Creator" style="text-align:center">  
		                    <p:selectBooleanCheckbox value="#{right_roles.resourceCreator}" />  
		                </p:column>  
		  
		                <p:column headerText="Group Member" style="text-align:center">  
		                    <p:selectBooleanCheckbox value="#{right_roles.groupMember}" />  
		                </p:column>  
		  
		                <p:column headerText="Guest" style="text-align:center">  
		                    <p:selectBooleanCheckbox value="#{right_roles.guest}" />  
		                </p:column>  
		            </p:dataTable> 
			    </p:tab>  
			    <p:tab rendered="#{accessBean.isCourse or accessBean.isOrganisation}" title="Course Rights">  
			        <p:dataTable var="right_roles" value="#{accessBean.courseAccessMatrix}">  
		                <p:column headerText="Rights" style="text-align:center">  
		                    <h:outputText value="#{right_roles.right}" />  
		                </p:column>  
		                
		  				<p:column headerText="Moderator" style="text-align:center" rendered="#{accessBean.isOrganisation}">  
		                    <p:selectBooleanCheckbox value="#{right_roles.moderator}" />  
		                </p:column>  
		  
		                <p:column headerText="Group Creator" style="text-align:center" rendered="#{accessBean.isCourse or accessBean.isOrganisation}">  
		                    <p:selectBooleanCheckbox value="#{right_roles.groupCreator}" />  
		                </p:column>  
		  
		                <p:column headerText="Resource Creator" style="text-align:center">  
		                    <p:selectBooleanCheckbox value="#{right_roles.resourceCreator}" />  
		                </p:column>  
		  
		                <p:column headerText="Group Member" style="text-align:center">  
		                    <p:selectBooleanCheckbox value="#{right_roles.groupMember}" />  
		                </p:column>  
		  
		                <p:column headerText="Guest" style="text-align:center">  
		                    <p:selectBooleanCheckbox value="#{right_roles.guest}" />  
		                </p:column>  
		            </p:dataTable> 
			    </p:tab>  
			    <p:tab rendered="#{accessBean.isCourse or accessBean.isOrganisation or accessBean.isGroup}" title="Group Rights">  
			        <p:dataTable var="right_roles" value="#{accessBean.groupAccessMatrix}">  
		                <p:column headerText="Rights" style="text-align:center">  
		                    <h:outputText value="#{right_roles.right}" />  
		                </p:column>  
		                
		  				<p:column headerText="Moderator" style="text-align:center" rendered="#{accessBean.isOrganisation}">  
		                    <p:selectBooleanCheckbox value="#{right_roles.moderator}" />  
		                </p:column>  
		  
		                <p:column headerText="Group Creator" style="text-align:center" rendered="#{accessBean.isCourse or accessBean.isOrganisation}">  
		                    <p:selectBooleanCheckbox value="#{right_roles.groupCreator}" />  
		                </p:column>  
		  
		                <p:column headerText="Resource Creator" style="text-align:center">  
		                    <p:selectBooleanCheckbox value="#{right_roles.resourceCreator}" />  
		                </p:column>  
		  
		                <p:column headerText="Group Member" style="text-align:center">  
		                    <p:selectBooleanCheckbox value="#{right_roles.groupMember}" />  
		                </p:column>  
		  
		                <p:column headerText="Guest" style="text-align:center">  
		                    <p:selectBooleanCheckbox value="#{right_roles.guest}" />  
		                </p:column>  
		            </p:dataTable>
			    </p:tab>    
			    <p:tab rendered="#{accessBean.isCourse or accessBean.isOrganisation or accessBean.isGroup}" title="Resource Rights">  
	        		<p:dataTable var="right_roles" value="#{accessBean.resourceAccessMatrix}">  
			        	<p:column headerText="Rights" style="text-align:center">  
			               <h:outputText value="#{right_roles.right}" />  
			           	</p:column>  
			           
						<p:column headerText="Moderator" style="text-align:center" rendered="#{accessBean.isOrganisation}">  
			               <p:selectBooleanCheckbox  value="#{right_roles.moderator}" />  
			           	</p:column>  
				
			          	<p:column headerText="Group Creator" style="text-align:center" rendered="#{accessBean.isCourse or accessBean.isOrganisation}">  
			               <p:selectBooleanCheckbox value="#{right_roles.groupCreator}" />  
			          	</p:column>  
			
			          	<p:column headerText="Resource Creator" style="text-align:center">  
			               <p:selectBooleanCheckbox value="#{right_roles.resourceCreator}" />  
			          	</p:column>  
			
			          	<p:column headerText="Group Member" style="text-align:center">  
			               <p:selectBooleanCheckbox value="#{right_roles.groupMember}" />  
			          	</p:column>  
			
			          	<p:column headerText="Guest" style="text-align:center">  
			               <p:selectBooleanCheckbox value="#{right_roles.guest}" />  
			          	</p:column>  
			       	</p:dataTable>  
			    </p:tab>   
			</p:accordionPanel> 
            <div style="margin-top: 10px; text-align: center;" >
				<p:commandButton value="Save" styleClass="greenbutton" style="margin-right:10px" action="#{accessBean.saveRights}"></p:commandButton>
				<p:commandButton value="Cancel" styleClass="greenbutton" style="margin-left:10px"></p:commandButton>
			</div>
		</h:form>
	</ui:define>
	<ui:define name="right_layout">
	</ui:define>
</ui:composition>
</html>