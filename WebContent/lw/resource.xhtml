<ui:composition template="/WEB-INF/templates/layout/template.xhtml"
				xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
				xmlns:h="http://xmlns.jcp.org/jsf/html"
				xmlns:f="http://xmlns.jcp.org/jsf/core"
				xmlns:p="http://primefaces.org/ui" xmlns:lw="http://l3s.de/learnweb">

    <ui:param name="pageTitle" value="#{resourceBean.resource.title}"/>
    <ui:param name="smallPage" value="true"/>

	<ui:define name="metadata">
		<f:metadata>
			<f:viewParam name="resource_id" value="#{resourceBean.id}" required="true"/>
			<f:viewAction action="#{resourceBean.loadResource}"/>
		</f:metadata>
	</ui:define>

	<ui:define name="breadcrumb">
		<lw:breadcrumb-item link="myhome/groups.jsf" title="#{msg.myGroups}">
			<ui:decorate template="/WEB-INF/templates/blocks/breadcrumb/nav_list_first.xhtml"/>
		</lw:breadcrumb-item>

		<lw:breadcrumb-item link="group/resources.jsf?group_id=#{userBean.user.activeGroup.id}" title="#{userBean.user.activeGroup.title}" >
			<p:repeat var="groups" value="#{userBean.user.groups}">
				<li><a href="group/resources.jsf?group_id=#{groups.id}">#{groups.title}</a></li>
			</p:repeat>
		</lw:breadcrumb-item>

		<lw:breadcrumb-item link="group/resources.jsf?group_id=#{userBean.user.activeGroup.id}" title="#{msg.resources}">
			<ui:decorate template="/WEB-INF/templates/blocks/breadcrumb/nav_list_my_groups.xhtml"/>
		</lw:breadcrumb-item>

		<lw:breadcrumb-item title="#{resourceBean.resource.title}"/>
	</ui:define>

	<ui:define name="center_layout">

		<h1><a href="#{resourceBean.resource.learnwebUrl}"><h:outputText value="#{resourceBean.resource.title}" escape="false"/></a></h1>
	
		<ui:fragment rendered="#{not userBean.loggedIn}">
		<p>You need to login to access this resource.</p>
		</ui:fragment>

	</ui:define>		
</ui:composition>