<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui" 
	lang="#{userBean.localeCode}">

	
	<ui:composition template="/templates/main/main.xhtml">
		<ui:param name="pageTitle" value="#{msg['Glossary.glossary']}" />
		<ui:param name="loginRequired" value="true" />
		
		<ui:define name="center_layout">

		<h:outputStylesheet library="glossary" name="glossary.css"/>
			
			<h:form>
				<p:dataTable value="#{glossaryBean.entries}" var="entry" column="4" styleClass="glossary" emptyMessage="#{msg.no_results_found}"> 
				
					<p:column sortBy="#{entry.item}" filterBy="#{entry.item}" filterMatchMode="contains" styleClass="filter">
						<f:facet name="header">
			     			 <h:outputText value="#{msg.item}"/>
			    		</f:facet>
							<h:outputText value="#{entry.item}" styleClass="data"/>
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{msg.description}"/>
						</f:facet>
						<h:outputText value="#{entry.description}" styleClass="data"/>
					</p:column>
					
					<p:column filterBy="#{entry.topic}" filterMatchMode="contains" styleClass="filter">
						<f:facet name="header">
							<h:outputText value="#{msg.topic}" />
						</f:facet>
						<h:outputText value="#{entry.topic}" styleClass="data"/>
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{msg.language_it}"/>
						</f:facet>
						<h:outputText value="#{entry.italian}" styleClass="data"/>
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{msg.language_de}"/>
						</f:facet>
						<h:outputText value="#{entry.german}" styleClass="data"/>
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{msg.language_es}"/>
						</f:facet>
						<h:outputText value="#{entry.spanish}" styleClass="data"/>
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{msg['Glossary.reference_material']}"/>
						</f:facet>
						<a href="#{entry.reference}">
							#{entry.reference}
						</a>
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{msg.added_by}"/>
						</f:facet>
							<h:outputText styleClass="data">
								<a href="./user/detail.jsf?user_id=#{entry.userId}">
									#{entry.user.username}
								</a>
							</h:outputText>
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{msg['Glossary.last_modified']}"/>
						</f:facet>
							<h:outputText value="#{entry.lastModified}">
           					 	<f:convertDateTime type="both" timeStyle="short" dateStyle="long" timeZone="#{userBean.timeZone}"/>
       						 </h:outputText>						
					</p:column>
					
					<p:column>
						<f:facet name="header">
							<h:outputText value="#{msg.options}"/>
						</f:facet>
						<h:commandButton process="@this" rendered="#{}" id="edit" action="${glossaryBean.edit(entry)}" value="#{msg.edit}" 
							styleClass="greenbutton"/>
						
						
						<h:commandButton id="delete" action="${glossaryBean.deleteEntry(entry)}" value="#{msg.delete}" styleClass="greenbutton"/>
					</p:column>
					
				</p:dataTable>
			</h:form>
				
				<hr/>
				
			<div class="center-header" id="group_header">
				<span>
					#{msg['Glossary.add_new_entry']}
				</span> 
			</div>	
				
			<h:form styleClass="grey_border">
				<h:panelGrid id="grid" columns="3" styleClass="grid">
			
					<h:outputLabel value="#{msg.item}" for="item" styleClass="datatype"/>
					<h:inputText id="item" value="#{glossaryBean.selectedEntry.item}" styleClass="inputfield" 
						validatorMessage="#{msg['Glossary.entry_item_message']}"/> 
					<p:message for="item" />
					
					<h:outputLabel value="#{msg.description}" for="description" styleClass="datatype"/>
					<h:inputTextarea id="description" value="#{glossaryBean.selectedEntry.description}" styleClass="inputarea"/>
					<p:message for="description" />
					
					<h:outputLabel value="#{msg.topic}" for="topic" styleClass="datatype"/>
					<h:inputText id="topic" value="#{glossaryBean.selectedEntry.topic}" styleClass="inputfield"/>
					<p:message for="topic" />
					
					<h:outputLabel value="#{msg.language_it}" for="italian" styleClass="datatype"/>
					<h:inputText id="italian" value="#{glossaryBean.selectedEntry.italian}" styleClass="inputfield"/>
					<p:message for="italian" />
					
					<h:outputLabel value="#{msg.language_de}" for="german" styleClass="datatype"/>
					<h:inputText id="german" value="#{glossaryBean.selectedEntry.german}" styleClass="inputfield"/>
					<p:message for="german" />
					
					<h:outputLabel value="#{msg.language_es}" for="spanish" styleClass="datatype"/>
					<h:inputText id="spanish" value="#{glossaryBean.selectedEntry.spanish}" styleClass="inputfield"/>
					<p:message for="spanish" />
					
					<h:outputLabel value="#{msg['Glossary.reference_material']}" for="reference_material" styleClass="datatype"/>
					<h:inputText id="reference_material" value="#{glossaryBean.selectedEntry.reference}" styleClass="inputfield" 
						validatorMessage="#{msg.linkvalidator_message}"/>
					<p:message for="reference_material" />			
			</h:panelGrid>
			
				<br/>
				<br/>
			
			<h:commandButton id="new_entry" action="#{glossaryBean.addNewEntry}" value="#{msg['Glossary.new_entry']}" styleClass="greenbutton"/>
				
		</h:form>
	
		</ui:define>
	</ui:composition>
</html>