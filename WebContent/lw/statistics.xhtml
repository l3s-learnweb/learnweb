<ui:composition template="/templates/main/main.xhtml" 
	xmlns:ui="http://java.sun.com/jsf/facelets" 
	xmlns:h="http://java.sun.com/jsf/html" 
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:param name="pageTitle" value="#{msg.statistics}"/>
	<ui:param name="smallPage" value="true"/>
	
	<ui:define name="center_layout">
	
	 <p:accordionPanel activeIndex="null">
        <p:tab title="Godfather Part I">
            <h:panelGrid columns="2" cellpadding="10">
                <p:graphicImage name="demo/images/godfather/godfather1.jpg" />
                <h:outputText
                    value="The story begins as Don Vito Corleone..." />
            </h:panelGrid>
        </p:tab>
        <p:tab title="Godfather Part II">
            <h:panelGrid columns="2" cellpadding="10">
                <p:graphicImage name="demo/images/godfather/godfather2.jpg" />
                <h:outputText value="Francis Ford Coppola's legendary..." />
            </h:panelGrid>
        </p:tab>
        <p:tab title="Godfather Part III">
            <h:panelGrid columns="2" cellpadding="10">
                <p:graphicImage name="demo/images/godfather/godfather3.jpg" />
                <h:outputText value="After a break of more than 15 years..." />
            </h:panelGrid>
        </p:tab>
    </p:accordionPanel>
    
    
		<style type="text/css">
		 .ui-datatable {margin-bottom:4rem;}
		</style>
		<h1><h:outputText value="#{msg.statistics}" escape="false" /></h1>
	
		<div class="ui-datatable ui-widget">
			<table role="grid" >
				<thead>
					<tr role="row">
						<th class="ui-state-default" role="columnheader"><div class="ui-dt-c">
								<span>Description</span>
							</div></th>
						<th class="ui-state-default" role="columnheader"><div class="ui-dt-c">
								<span>Value</span>
							</div></th>
			
					</tr>
				</thead>
				<tbody class="ui-datatable-data ui-widget-content">
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">Registered users</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.users}"/></div></td>
					</tr>
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">Groups</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.groups}"/></div></td>
					</tr>
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">Resources overall</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.resources}"/></div></td>
					</tr>
					
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">number of rated resources</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.ratedResourcesCount}"/></div></td>
					</tr>
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">number of tagged resources</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.taggedResourcesCount}"/></div></td>
					</tr>
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">number of commented resources</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.commentedResourcesCount}"/></div></td>
					</tr>
					
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">number of rates</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.rateCount}"/></div></td>
					</tr>
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">number of tags</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.tagCount}"/></div></td>
					</tr>
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">number of comments</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.commentCount}"/></div></td>
					</tr>
					
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">average number of rates per rated resource</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.ratedResourcesAverage}"><f:convertNumber minFractionDigits="2" maxFractionDigits="2" /></h:outputText></div></td>
					</tr>
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">average number of tags per tagged resource</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.taggedResourcesAverage}"><f:convertNumber minFractionDigits="2" maxFractionDigits="2" /></h:outputText></div></td>
					</tr>
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">average number of comments per commented resource</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.commentedResourcesAverage}"><f:convertNumber minFractionDigits="2" maxFractionDigits="2" /></h:outputText></div></td>
					</tr>
					<!-- 
					<tr class="ui-widget-content ui-datatable-even">
						<td><div class="ui-dt-c">average session length</div></td>
						<td><div class="ui-dt-c"><h:outputText value="#{statisticsBean.averageUsageTime}"><f:convertNumber minFractionDigits="2" maxFractionDigits="2" /></h:outputText> minutes</div></td>
					</tr>
					 -->
				</tbody>
			</table>
		</div>	
			
		<p:dataTable var="month" value="#{statisticsBean.activeUsersPerMonth}" >
			<f:facet name="header">
		        Active users per month
		    </f:facet>
    
		    <p:column headerText="Month">
		        <h:outputText value="#{month.key}" />
		    </p:column>
		 
		    <p:column headerText="Active users">
		        <h:outputText value="#{month.value}" />
		    </p:column>		 
		</p:dataTable>	
			
		<p:dataTable var="row" value="#{statisticsBean.resourcesPerSource}" >
			<f:facet name="header">
		    	Resource count per source
		    </f:facet>
    
		    <p:column headerText="Source">
		        <h:outputText value="#{row.key}" />
		    </p:column>
		 
		    <p:column headerText="Resources">
		        <h:outputText value="#{row.value}" />
		    </p:column>	
		    
		    <f:facet name="footer">
		    	* Resources created by crawlers
		    </f:facet>	 
		</p:dataTable>	
		
	</ui:define>		
</ui:composition>