<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core"
      xmlns:p="http://primefaces.org/ui"
      lang="#{userBean.localeCode}">

<!--@elvariable id="pageTitle" type="java.lang.String"-->
<!--@elvariable id="helpText" type="java.lang.String"-->
<!--@elvariable id="disableGrowl" type="java.lang.Boolean"-->
<!--@elvariable id="smallPage" type="java.lang.Boolean"-->
<!--@elvariable id="loginRequired" type="java.lang.Boolean"-->

<f:view locale="#{userBean.locale}" contentType="text/html">
    <ui:insert name="metadata"/>

    <h:head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
        <title>#{pageTitle} - #{msg['application.name']}</title>
        <link rel="shortcut icon" href="#{request.contextPath}/resources/icon/favicon.ico"/>


 <h:outputStylesheet library="primefaces-omega" name="theme.css"/>
 
        <h:outputStylesheet library="main-template" name="main.css"/>
        <h:outputStylesheet library="main-template" name="responsive_design.css" />

        <h:outputScript library="primefaces" name="jquery/jquery.js" target="head"/>
        <h:outputScript target="head" name="vendor/jquery-migrate-v3.0.1/jquery-migrate-3.0.1.js" />
        <h:outputScript library="main-template" name="default2.js"/>

        <ui:decorate template="/templates/main/tooltips.xhtml"/>
		

        <base href="#{request.contextPath}/lw/"/>
    </h:head>

    <h:body>
        <p:growl id="growl" rendered="#{not disableGrowl}"/>

        <ui:decorate template="/templates/main/header.xhtml"/>

        <section id="content" class="#{smallPage? 'small_page':''}">
            <ui:fragment rendered="#{not learnwebBean.maintenanceMode}">
                <p:messages id="message" showDetail="false" showSummary="true" escape="false"/>

                <h:panelGroup layout="block" styleClass="small_page" rendered="#{loginRequired and !userBean.loggedIn}">
                    <ui:include src="/templates/user/login.xhtml"/>
                </h:panelGroup>

                <h:panelGroup rendered="#{!loginRequired || userBean.loggedIn}">
                    <ui:insert name="center_layout"></ui:insert>
                </h:panelGroup>
            </ui:fragment>
            <ui:fragment rendered="#{learnwebBean.maintenanceMode}">
                <div class="error" style="font-size:1.4rem">#{msg.service_unavailable}</div>
            </ui:fragment>
        </section>

        <h:panelGroup layout="block" id="footer" rendered="#{not empty helpText}"
                      styleClass="#{userBean.getPreference('helptext_hide')? 'd-none':''}">
            <h:outputText value="?" id="footer_question_mark"/>
            <h:outputText value="#{helpText}" escape="false" id="footer_text"/>
            <a href="#" onclick="return footerClose();" id="footer_close" title="#{msg.close}"></a>
        </h:panelGroup>

        <h:panelGroup layout="block" id="legal_footer" rendered="#{false and not userBean.loggedIn}">
            <h:link value="#{msg['imprint.title']}" outcome="/lw/imprint.jsf"/>
        </h:panelGroup>

        <h:form styleClass="d-none">
            <p:remoteCommand actionListener="#{userBean.setPreferenceRemote()}" name="setPreferenceRemote" async="true" process="@this" partialSubmit="true" global="false"/>
        </h:form>

		<script type="text/javascript">
			var market = '#{userBean.localeCode}';
		</script>

    </h:body>
</f:view>

</html>