<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:p="http://primefaces.org/ui">

	<ui:fragment>
		<h:panelGroup id="create_file_section"
			rendered="#{bean.rightPanelAction == 'newFile' and addResourceBean.formStep ==1}"
			styleClass="create-block new-resource" style="padding-bottom:2rem"
			layout="block">

			<h:form id="create_file_form">
				<p:fieldset id="create_file_fieldset"
					style="margin-bottom:20px">
					<p:panelGrid styleClass="full-width">
						<p:row>
							<p:column>
								<h:outputText value="#{msg.location}:" />
							</p:column>
							<p:column>
								<p:commandLink onstart="selectNewResourceLocation();">
									<h:outputText value="#{addResourceBean.currentPath}" />
								</p:commandLink>
							</p:column>
						</p:row>
						<p:row>
							<p:column>
								<h:outputText value="#{msg.file_name}*:" />
							</p:column>
							<p:column>
								<p:inputText validator="#{addResourceBean.validateNewDocName}"
									value="#{addResourceBean.resource.fileName}"
									styleClass="add_field" />
							</p:column>
						</p:row>
					</p:panelGrid>
				</p:fieldset>
				* #{msg.mandatory_field}

				<p:commandButton id="create_file_button" widgetVar="create-button"
					value="#{msg.create}" styleClass="greenbutton float-right"
					actionListener="#{addResourceBean.createFile}" ajax="true"
					onstart="PF('create-button').disable()"
					update=":growl :add_resource_panel :datagrid"
					oncomplete="update_header();resourceDND(); load_lightbox_editor();load_editor();">
					<f:setPropertyActionListener target="#{bean.rightPanelAction}"
						value="viewResource" />
					<f:setPropertyActionListener target="#{addResourceBean.formStep}"
						value="0" />
					<f:setPropertyActionListener target="#{bean.clickedResource}"
						value="#{addResourceBean.resource}" />
					<f:setPropertyActionListener
						target="#{resourceDetailBean.clickedResource}"
						value="#{addResourceBean.resource}" />
				</p:commandButton>

				<p:commandButton value="#{msg.cancel}"
					styleClass="graybutton float-right" immediate="true"
					actionListener="#{addResourceBean.cancelUpload}" ajax="true"
					update=":add_resource_panel"
					oncomplete="update_header(); PF('block1').hide();load_editor();"
					style="margin-right:0.5em;">
					<f:setPropertyActionListener target="#{bean.rightPanelAction}"
						value="none" />
				</p:commandButton>
				<br class="clear" />
				<p:blockUI block="create_file_fieldset" trigger="create_file_button"
					widgetVar="block1">
					<div class="float-left" style="height: 25px; line-height: 25px;">#{msg.please_wait}</div>
					<div class="loading-animation small float-left">
						<div></div>
						<div></div>
						<div></div>
					</div>
				</p:blockUI>
			</h:form>



		</h:panelGroup>
	</ui:fragment>
</ui:composition>