<ui:composition xmlns="http://www.w3.org/1999/xhtml" xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html" xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core" xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions"
                xmlns:p="http://primefaces.org/ui">

    <!--@elvariable id="res" type="de.l3s.learnweb.Resource"-->

    <c:if test="#{userBean.user.organisation.id eq 480}">
        <!-- Input fields for the yell course -->
        <tr>
            <td><h:outputText value="#{msg.title}"/>:</td>
            <td><p:inputText required="true" autoResize="false" class="border-box-100" value="#{res.title}"/></td>
        </tr>
        <tr>
            <td><h:outputText value="#{msg.language}"/>:</td>
            <td>
                <h:selectOneRadio id="langradio" styleClass="radio-inline" value="#{res.language}">
                    <f:selectItems value="#{searchFilterBean.langs}"/>
                </h:selectOneRadio>
            </td>
        </tr>
        <tr>
            <td><h:outputText value="#{msg.author}"/>:</td>
            <td><p:inputText required="false" class="border-box-100" value="#{res.author}"/></td>
        </tr>

        <tr>
            <td><h:outputText value="Media Source"/>:</td>
            <td><p:inputText required="false" class="border-box-100" value="#{res.msource}"/></td>
            <!-- #{res.title} refers to Resource.format, change it to res.audience ....  -->
        </tr>
        <tr>
            <td><h:outputLabel for="mtypelist" value="Media Type: (multiple if applicable)  "/></td>
            <td><p:selectCheckboxMenu id="mtypelist" value="#{res.selectedMtypes}" label="Media Types" multiple="true"
                                      filter="true" filterMatchMode="startsWith" panelStyle="width:343px">
                <f:selectItems value="#{searchFilterBean.mtypes}"/>
            </p:selectCheckboxMenu>
            </td>
        </tr>
        <tr>
            <td><h:outputText value="#{msg.description}"/>:</td>
            <td><p:inputTextarea required="true" value="#{res.description}" rows="4"
                                 class="border-box-100"/>
            </td>
        </tr>

    </c:if>

    <c:if test="#{userBean.user.organisation.id ne 480}">
        <c:forEach var="field" items="#{userBean.user.organisation.metadataFields}">
            <tr>
                <c:if test="#{fn:startsWith(field.type,'FULLWIDTH_')}">
                    <td colspan="2">
                        <c:if test="#{field.type eq 'FULLWIDTH_HEADER'}">
                            <h3><h:outputText value="#{utilBean.getLocaleMessage(field.label, null)}"/></h3>
                        </c:if>
                        <c:if test="#{field.type eq 'FULLWIDTH_DESCRIPTION'}">
                            <h4><h:outputText value="#{utilBean.getLocaleMessage(field.label, null)}"/></h4>
                        </c:if>

                    </td>
                </c:if>
                <c:if test="#{not fn:startsWith(field.type,'FULLWIDTH_')}">
                    <td>
                        <h:outputText value="#{utilBean.getLocaleMessage(field.name, null)}"/>:
                    </td>
                    <td>
                        <c:if test="#{field.moderatorOnly and not userBean.moderator}">
                            <h:outputText value="#{res.metadataWrapper[field.name]}"/>
                        </c:if>

                        <c:if test="#{not field.moderatorOnly or userBean.moderator}">
                            <c:if test="#{field.type eq 'INPUT_TEXT'}">
                                <p:inputText id="input_#{field.name}" required="#{field.required}"
                                             class="border-box-100" value="#{res.metadataWrapper[field.name]}"
                                             title="#{field.info}"/>
                                <p:tooltip for="input_#{field.name}" showEvent="focus" hideEvent="blur" position="left"
                                           rendered="#{not empty field.info}"/>
                            </c:if>

                            <c:if test="#{field.type eq 'INPUT_TEXTAREA'}">
                                <p:inputTextarea id="input_area_#{field.name}" required="#{field.required}"
                                                 value="#{res.metadataWrapper[field.name]}" title="#{field.info}"
                                                 rows="4" autoResize="false"
                                                 class="border-box-100"/>
                                <p:tooltip for="input_area_#{field.name}" showEvent="focus" hideEvent="blur"
                                           position="left" rendered="#{not empty field.info}"/>
                            </c:if>

                            <c:if test="#{field.type eq 'AUTOCOMPLETE'}">
                                <p:autoComplete id="input_complete_#{field.name}" required="#{field.required}"
                                                value="#{res.metadataWrapper[field.name]}"
                                                completeMethod="#{field.completeText}" class="border-box-100"/>
                                <p:tooltip for="input_complete_#{field.name}" showEvent="hover" position="left"
                                           rendered="#{true}" value="blaaaaaaa #{field.info}"/>
                            </c:if>

                            <c:if test="#{field.type eq 'ONE_MENU' or field.type eq 'ONE_MENU_EDITABLE'}">
                                <p:selectOneMenu id="input_selectone_#{field.name}"
                                                 value="#{res.metadataWrapper[field.name]}"
                                                 editable="#{field.type eq 'ONE_MENU_EDITABLE'}"
                                                 required="#{field.required}" class="border-box-100"
                                                 title="#{field.info}">
                                    <f:selectItems value="#{field.options}" var="option" itemLabel="#{option}"
                                                   itemValue="#{option}"/>
                                </p:selectOneMenu>
                                <p:tooltip for="input_selectone_#{field.name}" position="left"
                                           rendered="#{not empty field.info}"/>
                            </c:if>

                            <c:if test="#{field.type eq 'MULTIPLE_MENU'}">
                                <p:selectCheckboxMenu id="input_selectmultiple_#{field.name}"
                                                      value="#{res.metadataMultiValue[field.name]}" label=""
                                                      multiple="true" title="#{field.info}" required="#{field.required}"
                                                      filter="#{field.optionsList.size() gt 8}"
                                                      filterMatchMode="startsWith" panelStyle="width:250px">
                                    <f:selectItems value="#{field.optionsList}" var="option" itemLabel="#{option.label}"
                                                   itemValue="#{option.value}"/>
                                </p:selectCheckboxMenu>
                                <p:tooltip for="input_selectmultiple_#{field.name}" position="left"
                                           rendered="#{not empty field.info}"/>
                            </c:if>

                        </c:if>
                    </td>
                </c:if>
            </tr>
        </c:forEach>
    </c:if>

	<ui:fragment rendered="#{userBean.optionContentAnnotationFieldEnabled and res.type eq 'website'}">
		<tr>
			<td><h:outputText value="#{msg.content}" />:</td>
			<td><p:inputTextarea value="#{res.transcript}" rows="6" class="border-box-100" autoResize="false" /></td>
		</tr>
	</ui:fragment>

</ui:composition>