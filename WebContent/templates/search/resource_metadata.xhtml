<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">

    <!--@elvariable id="resource" type="de.l3s.learnweb.resource.ResourceDecorator"-->

    <div class="metadata">
        <div class="title">
            <h:outputText value="${resource.title}" escape="false"/>
        </div>

        <div class="embedded"><!--${resource.embedded}--></div>

        <div class="description">

            <ui:fragment rendered="#{not empty resource.description}">
                <b><h:outputText value="#{msg.description}:" escape="false"/></b><br/>
                <h:outputText value="${resource.descriptionHTML}" escape="false"/>
                <br/><br/>
            </ui:fragment>

            <b><h:outputText value="#{msg.location}: " escape="false"/></b>
            <h:outputLink value="${resource.urlProxied}">
                <h:outputText value="${resource.location}" escape="false"/>
            </h:outputLink>
            <br/>

            <b><h:outputText value="#{msg.resource_found_at}: " escape="false"/></b>
            <h:outputText value="#{resource.source.label}" escape="false"/>
            <br/>

            <ui:fragment rendered="#{not empty resource.description}">
                <b><h:outputText value="#{msg.author}: " escape="false"/></b>
                <h:outputText value="#{resource.resource.author}"/>
                <br/>
            </ui:fragment>

            <ui:fragment rendered="#{not empty resource.group}">
                <b><h:outputText value="#{msg.group}: "/></b>

                <h:outputLink value="group/resources.jsf">
                    <f:param name="group_id" value="#{resource.group.id}"/>
                    <f:param name="resource_id" value="#{resource.id}"/>
                    <h:outputText value="#{resource.group.title}"/>
                </h:outputLink>
                <br/>
            </ui:fragment>

            <ui:fragment rendered="#{not empty resource.resource.tags}">
                <b><h:outputText value="#{msg.tags}: " escape="false"/></b>

                <ui:repeat var="tag" value="#{resource.resource.tags}" varStatus="status">
                    <h:outputText value="#{tag.name}"/><h:outputText value=", " rendered="#{!status.last}" escape="false"/>
                </ui:repeat>
                <br/>
            </ui:fragment>
            <br/>
        </div>


        <div class="snippet">
            <ui:fragment rendered="#{(not empty resource.snippet) and false}">
                <br/>
                <b><h:outputText value="#{msg.snippet}:" escape="false"/></b><br/>
                <h:outputText value="${resource.snippet}" escape="false"/>
                <br/><br/>
            </ui:fragment>
            <br/>
        </div>


        <div class="options">
            <b><h:outputText value="#{msg.options}: "/></b><br/>

            <h:outputLink value="#{request.contextPath}/lw/user/login.jsf" rendered="#{!userBean.loggedIn}">
                <h:outputText value="#{msg.loginLabel}"/>
            </h:outputLink>

            <h:outputLink value="#"
                          onclick="setSelectedResource([{name:'resource_id', value:${resource.tempId}}]); PF('resource_dialog').show(); return false;"
                          rendered="#{userBean.loggedIn}"
                          title="#{msg.addToMyResources}">

                <h:graphicImage value="/resources/icon/silk/add.png" width="16" height="16" alt="#{msg.addToMyResources}"
                                style="vertical-align: middle; margin-right:4px;"/>#{msg.addToMyResources}
            </h:outputLink>
        </div>
    </div>
</ui:composition>