<ui:composition xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
    xmlns:h="http://xmlns.jcp.org/jsf/html"
    xmlns:f="http://xmlns.jcp.org/jsf/core"
    xmlns:p="http://primefaces.org/ui">

    <h:outputScript library="primefaces" target="head" name="jquery/jquery.js"/>
    <h:outputScript target="head" name="vendor/jquery-migrate-v3.0.1/jquery-migrate-3.0.1.js" />
    <h:outputScript library="main-template" target="head" name="selectionTree.js"/>

    <div id="userselect">
        <div class="klapper_zu">&#160;</div>
        <input type="checkbox" name="ignore" value="1" class="checker"/>
        <h:outputText value=" #{msg.courses}:" style="font-weight:bold;"/>

        <ul>
            <p:repeat var="course" value="#{userBean.user.courses}">
                <li>
                    <div class="klapper_zu klapper_auf">&#160;</div>
                    <input type="checkbox" name="ignore" value="1" class="checker"/>
                    <h:outputText value=" #{course.title}" style="font-weight:bold;"/>

                    <ul class="display-none">
                        <p:repeat var="group" value="#{course.groups}">
                            <li>
                                <div class="klapper_zu klapper_auf">&#160;</div>
                                <input type="checkbox" name="ignore" value="1" class="checker"/>
                                <h:outputText value=" #{group.title} (#{msg.group})"/>

                                <ul class="display-none">
                                    <p:repeat var="user" value="#{group.members}">
                                        <li>
                                            <input name="selected_users" id="us_form:us_checkbox:#{course.id}:#{group.id}:#{user.id}" value="#{user.id}" type="checkbox"/>
                                            <label for="us_form:us_checkbox:#{course.id}:#{group.id}:#{user.id}"> #{user.username}</label>
                                        </li>
                                    </p:repeat>
                                    
                        			<ui:fragment rendered="#{empty group.members}"><li>This group has no members</li></ui:fragment>
                                </ul>
                            </li>
                        </p:repeat>
                        <ui:fragment rendered="#{empty course.groups}"><li>This course doesn't has any groups</li></ui:fragment>
                    </ul>
                </li>
            </p:repeat>
        </ul>

    </div>

</ui:composition>