<ui:composition xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui">

    <h:outputStylesheet library="vendor" name="tooltipster-v3.3.0/tooltipster.min.css"/>
    <h:outputScript library="vendor" name="highcharts-v4.2.1/highcharts.js" target="body"/>
    <h:outputScript library="vendor" name="responsive-calendar-v0.9.0/responsive-calendar.min.js" target="body"/>
    <h:outputScript library="vendor" name="tooltipster-v3.3.0/jquery.tooltipster.min.js" target="body"/>
    <h:outputScript library="learnweb-layout" name="js/archive-timeline.js" target="body"/>

    <h:outputScript>
        const msg_timelineNumVersions = '#{msg.no_of_versions}';
        const msg_timelineTitle = '#{msg["Archive.timeline_title"]}';
        const msg_timelineSeriesName = '#{msg["Archive.timeline_series_name"]}';
        const msg_timelineClickZoom = '#{msg["Archive.timeline_click_zoom"]}';
        const msg_timelineTouchZoom = '#{msg["Archive.timeline_touch_zoom"]}';
        const translatedMonthsNames = ${resourceDetailBean.monthNames};
        const translatedShortMonthsNames = ${resourceDetailBean.shortMonthNames};

        Highcharts.setOptions({
            lang: {
                months: translatedMonthsNames,
                shortMonths: translatedShortMonthsNames,
                resetZoom: '#{msg.resetZoom}',
                resetZoomTitle: '#{msg.resetZoomTitle}',
            },
        });

        $(function() {
            if (document.getElementById("archive_timeline_container") != null) {
                loadTimeline(#{resourceDetailBean.archiveTimelineJsonData});
                loadCalendar(#{resourceDetailBean.archiveCalendarJsonData});
            }
        });
    </h:outputScript>

    <div class="box">
        <div id="archive_timeline_container"></div>
        <div id="archive_timeline_calendar" class="collapse">
            <div class="responsive-calendar">
                <div class="controls d-flex pb-2 mb-2 border-bottom">
                    <a class="mr-auto" data-go="prev">
                        <h:outputText value="#{msg.previous}" styleClass="p-1 text-white bg-primary border rounded-sm"/>
                    </a>
                    <h5 class="mb-0">
                        <span id="year" data-head-year="data-head-year"></span>
                        <span id="month" data-head-month="data-head-month"></span>
                    </h5>
                    <a class="ml-auto" data-go="next">
                        <h:outputText value="#{msg.next}" styleClass="p-1 text-white bg-primary border rounded-sm"/>
                    </a>
                </div>
                <div class="day-headers">
                    <ui:repeat var="day" value="${resourceDetailBean.shortWeekDays}">
                        <h:outputText value="#{day}" styleClass="day header"/>
                    </ui:repeat>
                </div>
                <div class="days" data-group="days">
                    <!-- the place where days will be generated -->
                </div>
            </div>
            <div class="text-right">
                <h:outputLink onclick="return returnToTimeline();">#{msg.back_to_timeline_view}</h:outputLink>
            </div>
        </div>
    </div>

</ui:composition>
