<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

<!--@elvariable id="res" type="de.l3s.learnweb.resource.Resource"-->

<p:remoteCommand name="onUnloadCommand" actionListener="#{resourceDetailBean.releaseResourceIfLocked}"/>
<p:poll interval="60" listener="#{resourceDetailBean.editActivityListener}"/>

<div class="fg-grid mb-3">
    <ui:decorate template="/WEB-INF/templates/blocks/resources/edit.xhtml">
        <ui:param name="res" value="#{res}"/>
    </ui:decorate>

    <p:outputLabel for="@next" value="#{msg['resource.defaultTab']}:"/>
    <div class="fg-col">
        <p:selectOneRadio value="#{res.defaultTab}" layout="grid" columns="1">
            <f:selectItems value="#{res.defaultTabs}" var="defaultTab" itemLabel="#{msg['resource.tab.'+=defaultTab]}" itemValue="#{defaultTab}"/>
        </p:selectOneRadio>
    </div>
    <p:message for="@previous"/>
</div>

<div class="d-flex">
    <p:defaultCommand target="saveResourceButton"/>
    <div class="me-auto">
        <p:commandButton styleClass="alt-btn" value="Recreate thumbnail" actionListener="#{resourceDetailBean.onUpdateThumbnail}"
                         update=":resourceDetails" immediate="true" rendered="#{userBean.admin}"
                         onstart="PF('detailsOverlay').show();" oncomplete="PF('detailsOverlay').hide()"/>
    </div>
    <div>
        <p:commandButton value="#{msg.cancel}" styleClass="secondary-btn" action="#{resourceDetailBean.cancelEdit}"
                         update=":resourceDetails" immediate="true"
                         onstart="PF('detailsOverlay').show();" oncomplete="PF('detailsOverlay').hide()"/>
        <p:commandButton id="saveResourceButton" value="#{msg.save}" actionListener="#{resourceDetailBean.saveEdit}" update=":resourceDetails" process="@form"
                         onstart="PF('detailsOverlay').show();" oncomplete="PF('detailsOverlay').hide();"/>
    </div>
</div>

</ui:composition>
