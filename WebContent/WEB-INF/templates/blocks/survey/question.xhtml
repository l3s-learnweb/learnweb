<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:fn="http://xmlns.jcp.org/jsp/jstl/functions">

<!--@elvariable id="question" type="de.l3s.learnweb.resource.survey.SurveyQuestion"-->
<!--@elvariable id="update" type="java.lang.Boolean"-->
    <c:if test="#{question.type eq 'FULLWIDTH_HEADER'}">
        <div class="d-flex justify-content-center align-items-center my-3">
            <h3>
                <p:outputLabel value="${question.label}" escape="false" for="@next"/>
            </h3>
        </div>
    </c:if>
    <c:if test="#{question.type eq 'FULLWIDTH_DESCRIPTION'}">
        <div class="d-flex flex-column flex-grow-1 justify-content-center">
            <p:outputLabel value="${question.label}" escape="false" for="@next"/>
        </div>
    </c:if>
    <c:if test="#{question.type eq 'INPUT_TEXT'}">
        <div class="d-flex flex-column flex-grow-1">
            <p:outputLabel value="${question.label}" escape="false" for="@next"/>
            <p:inputText required="#{question.required and empty param[save.clientId]}" value="#{update ? '' : surveyBean.userAnswers.answers[question.id]}"
                         title="#{question.info}">

                <f:validateLength disabled="#{empty question.options}" minimum="#{question.options[0]}" maximum="#{question.options[1]}"/>
            </p:inputText>
            <p:tooltip showEvent="focus"
                       hideEvent="blur" position="left"
                       rendered="#{not empty question.info}"/>
        </div>
    </c:if>
    <c:if test="#{question.type eq 'INPUT_TEXTAREA'}">
        <div class="d-flex flex-column flex-grow-1">
            <p:outputLabel value="${question.label}" escape="false" for="@next"/>
            <p:inputTextarea required="#{question.required and empty param[save.clientId]}" value="#{update ? '' : surveyBean.userAnswers.answers[question.id]}"
                             title="#{question.info}" rows="4">
                <f:validateLength disabled="#{empty question.options}" minimum="#{question.options[0]}" maximum="#{question.options[1]}"/>
            </p:inputTextarea>
            <p:tooltip for="input_area_#{question.id}" showEvent="focus"
                       hideEvent="blur" position="left"
                       rendered="#{not empty question.info}"/>
        </div>
    </c:if>
    <c:if test="#{question.type eq 'AUTOCOMPLETE'}">
        <div class="d-flex flex-column flex-grow-1">
            <p:outputLabel value="${question.label}" escape="false" for="@next"/>
            <p:autoComplete required="#{question.required and empty param[save.clientId]}"
                            value="#{update ? '' : surveyBean.userAnswers.answers[question.id]}"
                            completeMethod="#{question.completeText}"/>
            <p:tooltip showEvent="hover"
                       position="left" rendered="#{true}"
                       value="#{question.info}"/>
        </div>
    </c:if>
    <c:if test="#{question.type eq 'ONE_MENU' or question.type eq 'ONE_MENU_EDITABLE'}">
        <div class="d-flex flex-column flex-grow-1">
            <p:outputLabel value="${question.label}" escape="false" for="@next"/>
            <p:selectOneMenu value="#{update ? '' : surveyBean.userAnswers.answers[question.id]}"
                             editable="#{question.type eq 'ONE_MENU_EDITABLE'}"
                             required="#{question.required and empty param[save.clientId]}"
                             title="#{question.info}">
                <c:forEach var="answer" items="#{question.answers}">
                    <c:if test="#{!answer.deleted}">
                        <f:selectItem itemLabel="#{answer.value}" itemValue="#{answer.value}"/>
                    </c:if>
                </c:forEach>
            </p:selectOneMenu>
            <p:tooltip position="left" rendered="#{not empty question.info}"/>
        </div>
    </c:if>
    <c:if test="#{question.type eq 'MULTIPLE_MENU'}">
        <div class="d-flex flex-column flex-grow-1">
            <p:outputLabel value="${question.label}" escape="false" for="@next"/>
            <p:selectCheckboxMenu value="#{update ? question.answers : surveyBean.userAnswers.multipleAnswers[question.id]}"
                                  label="" multiple="true" title="#{question.info}"
                                  required="#{question.required and empty param[save.clientId]}"
                                  filter="#{question.answers.size() gt 8}"
                                  filterMatchMode="startsWith" panelStyle="">
                <c:forEach var="answer" items="#{question.answers}">
                    <c:if test="#{!answer.deleted}">
                        <f:selectItem itemLabel="#{answer.value}" itemValue="#{answer.value}"/>
                    </c:if>
                </c:forEach>
            </p:selectCheckboxMenu>
            <p:tooltip position="left" rendered="#{not empty question.info}"/>
        </div>
    </c:if>
    <c:if test="#{question.type eq 'ONE_RADIO'}">
        <div class="d-flex flex-column flex-grow-1">
            <p:outputLabel value="${question.label}" escape="false" for="@next"/>
            <p:selectOneRadio value="#{update ? '' : surveyBean.userAnswers.answers[question.id]}"
                              multiple="true" title="#{question.info}"
                              required="#{question.required and empty param[save.clientId]}"
                              filter="#{question.answers.size() gt 8}" layout="responsive" columns="1"
                              filterMatchMode="startsWith" panelStyle="">
                <c:forEach var="answer" items="#{question.answers}">
                    <c:if test="#{!answer.deleted}">
                        <f:selectItem itemLabel="#{answer.value}" itemValue="#{answer.value}"/>
                    </c:if>
                </c:forEach>
            </p:selectOneRadio>
            <p:tooltip position="left" rendered="#{not empty question.info}"/>
        </div>
    </c:if>
    <c:if test="#{question.type eq 'MANY_CHECKBOX'}">
        <div class="d-flex flex-column flex-grow-1">
            <p:outputLabel value="${question.label}" escape="false" for="@next"/>
            <p:selectManyCheckbox value="#{update ? question.answers : surveyBean.userAnswers.multipleAnswers[question.id]}"
                                  label="" multiple="true" title="#{question.info}"
                                  required="#{question.required and empty param[save.clientId]}"
                                  filter="#{question.answers.size() gt 8}"
                                  filterMatchMode="startsWith" panelStyle=""
                                  layout="grid" columns="1">
                <c:forEach var="answer" items="#{question.answers}">
                    <c:if test="#{!answer.deleted}">
                        <f:selectItem itemLabel="#{answer.value}" itemValue="#{answer.value}"/>
                    </c:if>
                </c:forEach>
            </p:selectManyCheckbox>
            <p:tooltip position="left" rendered="#{not empty question.info}"/>
        </div>
    </c:if>
</ui:composition>