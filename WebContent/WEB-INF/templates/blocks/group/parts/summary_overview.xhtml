<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
	xmlns:h="http://xmlns.jcp.org/jsf/html"
	xmlns:f="http://xmlns.jcp.org/jsf/core"
	xmlns:p="http://primefaces.org/ui">

	<!--@elvariable id="summary" type="de.l3s.learnweb.group.SummaryOverview"-->
	<!--@elvariable id="summaryTitle" type="java.lang.String"-->

	<p:panel header="#{summaryTitle}" rendered="#{not empty summary.isEmpty()}" styleClass="mb-3">
		<h:form id="summary_overview_form">
			<p:accordionPanel styleClass="last-activity-overview ui-widget-content-pt-0" multiple="true">
				<p:tab rendered="#{not empty summary.addedResources}">
					<f:facet name="title">
						<i class="fa fa-fw fa-plus text-success pr-1" aria-hidden="true"></i>
						<h:outputFormat value="#{msg['added_resources']}"><f:param value="#{summary.addedResources.size()}" /></h:outputFormat>
					</f:facet>

					<div class="activity-feed-slider activity-feed-added-resources">
						<p:carousel value="#{summary.addedResources}" var="item" styleClass="ui-carousel-light" responsive="true" circular="true" breakpoint="-1">
							<p:commandLink update=":group_right_column">
								<f:setPropertyActionListener target="#{rightPaneBean.viewResource}" value="#{item.resource}"/>

								<div class="resource-snippet mx-auto">
									<div class="resource-preview">
										<div class="resource-preview-wrapper">
											<div class="resource-preview-wrapper2">
												<div class="resource-preview-block"></div>
												<img class="resource-preview-image" src="#{item.resource.thumbnail1.url}" alt="#{item.resource.title}" />
											</div>
										</div>
									</div>
									<div class="resource-title">
										<div class="resource-title-wrapper">
											<div class="resource-title-text">
												<h:outputText value="#{item.resource.title}" escape="false" styleClass="resource-title-name" title="#{item.resource.title}" />
												<span class="resource-title-summary"><span>#{utilBean.getLocaleMessage(item.resource.type)}</span>#{msg.added_by} <span>#{item.resource.getOwnerUser().username}</span></span>
											</div>
										</div>
									</div>
								</div>
							</p:commandLink>
						</p:carousel>
					</div>
				</p:tab>

				<p:tab rendered="#{not empty summary.deletedResources}">
					<f:facet name="title">
						<i class="fa fa-fw fa-times text-danger pr-1" aria-hidden="true"></i>
						<h:outputFormat value="#{msg['deleted_resources']}"><f:param value="#{summary.deletedResources.size()}" /></h:outputFormat>
					</f:facet>

					<div class="activity-feed">
						<p:repeat value="#{summary.deletedResources}" var="item">
							<div class="feed-entry-text">
								<h:outputText value="#{item.description}" escape="false" />
							</div>
						</p:repeat>
					</div>
				</p:tab>

				<p:tab rendered="#{not empty summary.updatedResources}">
					<f:facet name="title">
						<i class="fa fa-fw fa-pencil text-warning pr-1" aria-hidden="true"></i>
						<h:outputFormat value="#{msg['updated_resources']}"><f:param value="#{summary.updatedResources.size()}" /></h:outputFormat>
					</f:facet>

					<div class="activity-feed-slider activity-feed-updated-resources">
						<p:carousel value="#{summary.updatedResources.keySet()}" var="item" styleClass="ui-carousel-light" responsive="true" circular="true" breakpoint="-1">
							<p:commandLink update=":group_right_column">
								<f:setPropertyActionListener target="#{rightPaneBean.viewResource}" value="#{item.resource}"/>

								<div class="resource-snippet mx-auto">
									<div class="resource-preview">
										<div class="resource-preview-wrapper">
											<div class="resource-preview-wrapper2">
												<div class="resource-preview-block"></div>
												<img class="resource-preview-image" src="#{item.resource.thumbnail1.url}" alt="#{item.resource.title}" />
											</div>
										</div>
									</div>
									<div class="resource-title">
										<div class="resource-title-wrapper">
											<div class="resource-title-text">
												<h:outputText value="#{item.resource.title}" escape="false" styleClass="resource-title-name" title="#{item.resource.title}" />
												<span class="resource-title-summary"><span>#{utilBean.getLocaleMessage(item.resource.type)}</span>#{msg.added_by} <span>#{item.resource.getOwnerUser().username}</span></span>
											</div>
										</div>
									</div>
								</div>
							</p:commandLink>
						</p:carousel>
					</div>
				</p:tab>

				<p:tab rendered="#{not empty summary.forumsInfo}">
					<f:facet name="title">
						<i class="fa fa-fw fa-commenting-o text-info pr-1" aria-hidden="true"></i>
						<h:outputText value="#{msg.forum}" />
					</f:facet>

					<div class="activity-feed activity-feed-forum">
						<p:repeat value="#{summary.forumsInfo}" var="item">
							<div class="feed-entry-text">
								<h:outputText value="#{item.description}" escape="false" />
							</div>
						</p:repeat>
					</div>
				</p:tab>

				<p:tab rendered="#{not empty summary.membersInfo}">
					<f:facet name="title">
						<i class="fa fa-fw fa-users text-info pr-1" aria-hidden="true"></i>
						<h:outputText value="#{msg.members}" />
					</f:facet>

					<div class="activity-feed activity-feed-members">
						<p:repeat value="#{summary.membersInfo}" var="item">
							<div class="feed-entry-text">
								<h:outputText value="#{item.description}" escape="false" />
							</div>
						</p:repeat>
					</div>
				</p:tab>
			</p:accordionPanel>
		</h:form>
	</p:panel>
</ui:composition>
