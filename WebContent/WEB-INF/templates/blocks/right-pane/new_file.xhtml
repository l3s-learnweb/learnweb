<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

<h:form id="new_file_form">
    <p:remoteCommand name="updateLocationCommand" actionListener="#{addResourceBean.updateTargetLocation}" update=":right_pane :growl"
                     global="false" onstart="PF('rightPaneOverlay').show();" oncomplete="PF('rightPaneOverlay').hide()"/>

    <div class="fg-grid mb-3">
        <p:outputLabel for="@next" value="#{msg.location}:"/>
        <p:commandLink update=":selectDestinationDialog" value="#{addResourceBean.currentPath}"
                       oncomplete="createConfirmDialog('selectDestination', updateLocationCommand);return false;"/>

        <p:outputLabel for="@next" value="#{msg.file_name}:"/>
        <div class="fg-col">
            <p:inputText value="#{addResourceBean.resource.fileName}" required="true"/>
            <p:message for="@previous"/>
        </div>
    </div>

    <div class="d-flex">
        <p:defaultCommand target="createFileButton"/>

        <div class="mr-auto">
            <h:outputText value="* #{msg.mandatory_field}"/>
        </div>
        <div>
            <p:commandButton value="#{msg.cancel}" styleClass="secondary-btn" update=":right_pane" immediate="true" actionListener="#{addResourceBean.reset}">
                <f:setPropertyActionListener target="#{rightPaneBean.paneAction}" value="none"/>
            </p:commandButton>

            <p:commandButton id="createFileButton" value="#{msg.create}" global="false"
                             update=":growl :right_pane" actionListener="#{addResourceBean.createDocument}" onstart="PF('rightPaneOverlay').show()"
                             oncomplete="PF('rightPaneOverlay').hide();resourceAddedHook();load_lightbox_editor();">
                <f:setPropertyActionListener target="#{rightPaneBean.viewResource}" value="#{addResourceBean.resource}"/>
            </p:commandButton>
        </div>
    </div>
</h:form>

</ui:composition>
