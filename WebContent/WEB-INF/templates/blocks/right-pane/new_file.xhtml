<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

<h:form id="new_file_form">
    <p:remoteCommand name="updateLocationCommand" actionListener="#{addResourceBean.updateTargetLocation}" update=":right_pane :growl"
                     global="false" onstart="PF('rightPaneOverlay').show();" oncomplete="PF('rightPaneOverlay').hide()"/>

    <div class="form-group row">
        <h:outputText value="#{msg.location}:" styleClass="col-sm-4 col-form-label"/>
        <div class="col-sm-8 align-self-center">
            <p:commandButton update=":selectDestinationDialog" value="#{addResourceBean.currentPath}"
                             oncomplete="createConfirmDialog('selectDestination', updateLocationCommand);return false;"/>
        </div>
    </div>

    <div class="form-group row">
        <p:outputLabel for="@next" value="#{msg.file_name}:" styleClass="col-sm-4 col-form-label"/>
        <div class="col-sm-8">
            <p:inputText id="file_name_input" value="#{addResourceBean.resource.fileName}" required="true"/>
        </div>
        <div class="col-sm-12">
            <p:message for="@previous"/>
        </div>
    </div>

    <div class="row">
        <div class="col">
            <h:outputText value="* #{msg.mandatory_field}"/>
        </div>
        <div class="col text-right">
            <p:defaultCommand target="createFileButton"/>
            <p:commandButton value="#{msg.cancel}" styleClass="secondary-btn" update=":right_pane" immediate="true"
                             actionListener="#{addResourceBean.reset}">
                <f:setPropertyActionListener target="#{rightPaneBean.paneAction}" value="none"/>
            </p:commandButton>

            <p:commandButton id="createFileButton" value="#{msg.create}" global="false"
                             update=":growl :right_pane" actionListener="#{addResourceBean.createDocument}" onstart="PF('rightPaneOverlay').show()"
                             oncomplete="PF('rightPaneOverlay').hide();resourceAddedHook();load_lightbox_editor();">
                <f:setPropertyActionListener target="#{rightPaneBean.viewResource}" value="#{addResourceBean.resource}"/>
            </p:commandButton>
        </div>
    </div>
</h:form>

</ui:composition>
