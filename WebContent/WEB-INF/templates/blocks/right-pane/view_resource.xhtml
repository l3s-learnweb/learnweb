<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:c="http://xmlns.jcp.org/jsp/jstl/core"
                xmlns:p="http://primefaces.org/ui">

<h:outputText value="This resource has been removed" rendered="${not rightPaneBean.clickedResource.canViewResource(userBean.user) and (rightPaneBean.clickedResource.deleted or rightPaneBean.clickedResource.groupId eq 0)}"/>

<h:outputText value="#{msg.group_resources_access_denied}" rendered="${not rightPaneBean.clickedResource.canViewResource(userBean.user) and not (rightPaneBean.clickedResource.deleted or rightPaneBean.clickedResource.groupId eq 0)}"/>

<ui:fragment rendered="#{rightPaneBean.clickedResource.canViewResource(userBean.user)}">
    <ui:fragment rendered="#{rightPaneBean.clickedResource.type eq 'spreadsheet' or
                             rightPaneBean.clickedResource.type eq 'presentation' or
                             rightPaneBean.clickedResource.type eq 'document' or
                             rightPaneBean.clickedResource.type eq 'text' or
                             rightPaneBean.clickedResource.type eq 'website' or
                             rightPaneBean.clickedResource.type eq 'pdf' or
                             rightPaneBean.clickedResource.type eq 'video' or
                             rightPaneBean.clickedResource.type eq 'audio' or
                             rightPaneBean.clickedResource.type eq 'image' or
                             rightPaneBean.clickedResource.type eq 'glossary2' or
                             rightPaneBean.clickedResource.type eq 'survey'}">
        <ui:decorate template="/WEB-INF/templates/blocks/right-pane/preview_box.xhtml">
            <ui:param name="res" value="#{rightPaneBean.clickedResource}"/>
        </ui:decorate>
    </ui:fragment>

    <c:if test="${userBean.user.organisation.id eq 480}">
        <ui:decorate template="/WEB-INF/templates/blocks/right-pane/yell_ext_metadetails.xhtml"/>
    </c:if>

    <c:choose>
        <c:when test="#{rightPaneBean.paneAction =='viewUpdatedResource'}">
            <input class="updated_resource_tabs" id="details_tab" type="radio" name="tabs" checked="checked"/>
            <label class="tab_label" for="details_tab">#{msg.details_right_pane}</label>
            <input class="updated_resource_tabs" id="activity_tab" type="radio" name="tabs"/>
            <label class="tab_label" for="activity_tab">#{msg.activity_right_pane}</label>

            <div id="details_content" class="tabs_right_pane">
                <ui:fragment>
                    <ui:decorate template="/WEB-INF/templates/blocks/right-pane/right_pane_under_previewbox_content.xhtml"/>
                </ui:fragment>
            </div>

            <div id="activity_content" class="tabs_right_pane">
                <h:dataTable var="datagrid" value="#{groupOverviewBean.updatedResourceActivities}" styleClass="not-selectable">
                    <h:column>
                        <div class="float-left">
                            <img id="userpic" src="#{datagrid.userImage}" alt="profile image" width="30" height="30" class="newsfeed_user_image"/>
                        </div>
                        <div class="newsfeed_text">
                            <h:outputText value="#{datagrid.description}" escape="false"/>
                        </div>

                        <h:outputText value="${userBean.getPrettyDate(datagrid.date)}" title="${userBean.formatDate(datagrid.date)}" escape="false" styleClass="newsfeed_date_difference"/>
                        <br></br>
                        <br></br>
                        <hr width="485px" class="newsfeed_separator"></hr>
                        <br></br>
                    </h:column>
                </h:dataTable>
            </div>
        </c:when>
        <c:otherwise>
            <ui:decorate template="/WEB-INF/templates/blocks/right-pane/right_pane_under_previewbox_content.xhtml"/>
        </c:otherwise>
    </c:choose>
</ui:fragment>

</ui:composition>
