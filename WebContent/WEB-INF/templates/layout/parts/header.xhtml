<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:f="http://xmlns.jcp.org/jsf/core"
                xmlns:h="http://xmlns.jcp.org/jsf/html"
                xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
                xmlns:p="http://primefaces.org/ui">

    <header class="layout-header bg-primary">
        <div class="layout-container d-flex">
            <div class="d-flex">
                <ui:fragment rendered="#{userBean.loggedIn}">
                    <a href="#{userBean.bannerLink}" id="menu-button" class="header-element menu-button">
                        <i class="fa fa-bars mx-auto" aria-hidden="true"></i>
                    </a>
                </ui:fragment>
                <a href="#{userBean.bannerLink}" class="header-element header-logo no-hover-bg">
                    <h:graphicImage library="images" name="#{userBean.bannerImage}" alt="#{msg['application.name']} logo" styleClass="w-100"/>
                </a>
            </div>

            <ui:fragment rendered="#{userBean.loggedIn}">
                <div class="d-flex order-1 order-md-0 search-wrapper flex-grow-1">
                    <form action="#{request.contextPath}/lw/search.jsf" class="header-element no-hover-bg search-form w-100">
                        <input type="hidden" name="action" value="#{searchBean.queryMode}"/>

                        <label for="searchfield" class="d-none">#{msg.searchLabel}</label>
                        <input id="searchfield" type="search" name="query" value="#{searchBean.query}" placeholder="#{msg.searchLabel}"/>

                        <button id="searchbutton" title="#{msg.searchLabel}">
                            <i class="fa fa-search" aria-hidden="true"></i>
                        </button>
                    </form>
                </div>
            </ui:fragment>

            <h:form styleClass="d-flex ml-auto">
                <h:outputLink value="#{request.contextPath}/lw/myhome/notification.jsf" styleClass="header-element" rendered="#{userBean.loggedIn}">
                    <i class="fa fa-bell #{messageBean.howManyNewMessages gt 0 ? ' has-badge' : null}" data-count="#{messageBean.howManyNewMessages}" aria-hidden="true"></i>
                </h:outputLink>

				<ui:include src="language_switch.xhtml"/>

                <ui:fragment rendered="#{userBean.loggedIn}">
                    <h:outputLink value="#{userBean.bannerLink}" id="userMenuButton" styleClass="header-element usermenu-button" ariaLabel="Profile" onclick="return false;">
                        <img src="${learnwebBean.getProfileImage(userBean.user)}" class="profile-picture" alt="" title="#{userBean.user.fullName}"/>
                    </h:outputLink>

                    <p:menu overlay="true" trigger="userMenuButton" my="right bottom" at="right top" styleClass="ui-menu-navbar-submenu ui-menu-primary">
                        <p:menuitem url="#{request.contextPath}/lw/user/detail.jsf?user_id=#{userBean.user.id}" icon="fa fa-fw fa-user" value="#{msg.profile}"/>
                        <p:menuitem url="#{request.contextPath}/lw/myhome/profile.jsf" icon="fa fa-fw fa-cog" value="#{msg.settings}"/>
                        <p:menuitem url="#{request.contextPath}/lw/dashboard/index.jsf" icon="fa fa-fw fa-table" value="#{msg.myDashboardTitle}"/>
                        <p:menuitem url="#{request.contextPath}/lw/searchHistory/entityRelationship.jsf?user_id=#{userBean.user.id}" icon="fa fa-fw fa-history" value="#{msg.search_history}"/>
                        <p:menuitem action="#{loginBean.logout}" icon="fa fa-fw fa-sign-out" value="#{msg.logout}"/>
                    </p:menu>
                </ui:fragment>
            </h:form>
        </div>
    </header>

</ui:composition>
